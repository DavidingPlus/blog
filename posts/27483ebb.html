<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="renderer" content="webkit"><meta name="force-rendering" content="webkit"><script>window.MSInputMethodContext&&document.documentMode&&(window.location.href="https://support.dmeng.net/upgrade-your-browser.html")</script><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="format-detection" content="telephone=no"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black"><link rel="icon" href="/assets/favicon-16x16.webp?v=2.8.6" type="image/png" sizes="16x16"><link rel="icon" href="/assets/favicon-32x32.webp?v=2.8.6" type="image/png" sizes="32x32"><link rel="apple-touch-icon" href="/assets/apple-touch-icon.webp?v=2.8.6" sizes="180x180"><meta name="description" content="前言        数据库期末重点： SQL编程–难度类似实验测评 关系模型—概念、关系运算 CDM设计—根据题目给出的需求，画出PD格式的CDM图 PDM设计—课件4-4数据库规范化设计 ODBC—概念、分级、方法 JDBC----概念、分级、编程 存储过程、触发器----难度类似实验 第七章考核点：5v，cap，base，四种nosql数据库类型和分"><meta property="og:type" content="article"><meta property="og:title" content="数据库 期末复习"><meta property="og:url" content="https://blog.davidingplus.cn/posts/27483ebb.html"><meta property="og:site_name" content="DavidingPlus&#39;s Blog"><meta property="og:description" content="前言        数据库期末重点： SQL编程–难度类似实验测评 关系模型—概念、关系运算 CDM设计—根据题目给出的需求，画出PD格式的CDM图 PDM设计—课件4-4数据库规范化设计 ODBC—概念、分级、方法 JDBC----概念、分级、编程 存储过程、触发器----难度类似实验 第七章考核点：5v，cap，base，四种nosql数据库类型和分"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://cdn.davidingplus.cn/images/2025/02/01/image-20230603193803070.png"><meta property="og:image" content="https://cdn.davidingplus.cn/images/2025/02/01/image-20250201003952106.png"><meta property="og:image" content="https://cdn.davidingplus.cn/images/2025/02/01/image-20250201004007703.png"><meta property="og:image" content="https://cdn.davidingplus.cn/images/2025/02/01/image-20250201004025422.png"><meta property="og:image" content="https://cdn.davidingplus.cn/images/2025/02/01/image-20250201004048581.png"><meta property="og:image" content="https://cdn.davidingplus.cn/images/2025/02/01/image-20230603193850316.png"><meta property="og:image" content="https://cdn.davidingplus.cn/images/2025/02/01/image-20230603193923231.png"><meta property="og:image" content="https://cdn.davidingplus.cn/images/2025/02/01/image-20230603193933407.png"><meta property="og:image" content="https://cdn.davidingplus.cn/images/2025/02/01/image-20230603193945024.png"><meta property="og:image" content="https://cdn.davidingplus.cn/images/2025/02/01/image-20230603193954175.png"><meta property="og:image" content="https://cdn.davidingplus.cn/images/2025/02/01/image-20230603194004354.png"><meta property="og:image" content="https://cdn.davidingplus.cn/images/2025/02/01/image-20230603194028029.png"><meta property="og:image" content="https://cdn.davidingplus.cn/images/2025/02/01/image-20230603194202048.png"><meta property="og:image" content="https://cdn.davidingplus.cn/images/2025/02/01/image-20230603194222701.png"><meta property="og:image" content="https://cdn.davidingplus.cn/images/2025/02/01/image-20230603194229345.png"><meta property="og:image" content="https://cdn.davidingplus.cn/images/2025/02/01/image-20230603194242124.png"><meta property="og:image" content="https://cdn.davidingplus.cn/images/2025/02/01/image-20230603194250887.png"><meta property="og:image" content="https://cdn.davidingplus.cn/images/2025/02/01/image-20230603194259344.png"><meta property="og:image" content="https://cdn.davidingplus.cn/images/2025/02/01/image-20230603194328262.png"><meta property="og:image" content="https://cdn.davidingplus.cn/images/2025/02/01/image-20230603194334061.png"><meta property="og:image" content="https://cdn.davidingplus.cn/images/2025/02/01/image-20230603194419185.png"><meta property="og:image" content="https://cdn.davidingplus.cn/images/2025/02/01/image-20230603194431807.png"><meta property="og:image" content="https://cdn.davidingplus.cn/images/2025/02/01/image-20230603194438438.png"><meta property="og:image" content="https://cdn.davidingplus.cn/images/2025/02/01/image-20230603194449699.png"><meta property="og:image" content="https://cdn.davidingplus.cn/images/2025/02/01/image-20230603194501880.png"><meta property="og:image" content="https://cdn.davidingplus.cn/images/2025/02/01/image-20230603194516267.png"><meta property="og:image" content="https://cdn.davidingplus.cn/images/2025/02/01/image-20230603194526082.png"><meta property="og:image" content="https://cdn.davidingplus.cn/images/2025/02/01/image-20230603194531339.png"><meta property="og:image" content="https://cdn.davidingplus.cn/images/2025/02/01/image-20230603194547936.png"><meta property="og:image" content="https://cdn.davidingplus.cn/images/2025/02/01/image-20230603194659342.png"><meta property="og:image" content="https://cdn.davidingplus.cn/images/2025/02/01/image-20230603194708438.png"><meta property="og:image" content="https://cdn.davidingplus.cn/images/2025/02/01/image-20230603194714433.png"><meta property="og:image" content="https://cdn.davidingplus.cn/images/2025/02/01/image-20230603194737413.png"><meta property="article:published_time" content="2023-09-19T01:00:00.000Z"><meta property="article:modified_time" content="2023-09-19T01:00:00.000Z"><meta property="article:author" content="DavidingPlus"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://cdn.davidingplus.cn/images/2025/02/01/image-20230603193803070.png"><title>数据库 期末复习 | DavidingPlus's Blog</title><link ref="canonical" href="https://blog.davidingplus.cn/posts/27483ebb.html"><link rel="dns-prefetch" href="https://cdn.davidingplus.cn"><link rel="stylesheet" href="//cdn.davidingplus.cn/files/hexo-theme-stun-third-party/css/fontawesome.css" type="text/css"><link rel="stylesheet" href="//cdn.davidingplus.cn/files/hexo-theme-stun-third-party/css/fancybox.css" type="text/css"><link rel="stylesheet" href="/css/index.css?v=2.8.6"><script>var Stun=window.Stun||{},CONFIG={root:"/",algolia:void 0,assistSearch:["bing","baidu"],fontIcon:{prompt:{success:"fas fa-check-circle",info:"fas fa-arrow-circle-right",warning:"fas fa-exclamation-circle",error:"fas fa-times-circle"},copyBtn:"fas fa-copy"},sidebar:{offsetTop:"55px",tocMaxDepth:6},header:{enable:!0,showOnPost:!0,scrollDownIcon:!0},postWidget:{endText:!0},nightMode:{enable:!0},back2top:{enable:!0},back2bottom:{enable:!0},codeblock:{style:"default",highlight:"light",wordWrap:!0},reward:!0,fancybox:!0,zoomImage:{gapAside:"20px"},galleryWaterfall:{colWidth:"255px",gapX:"65px"},lazyload:!0,pjax:{avoidBanner:!0},externalLink:{icon:{enable:!0,name:"fas fa-external-link-alt"}},shortcuts:void 0,prompt:{copyButton:"复制",copySuccess:"恭喜亲亲，复制成功咧",copyError:"哎呀，复制失败了"},sourcePath:{js:"js",css:"css",images:"images"},utterancesTheme:{light:"github-light",dark:"photon-dark"}};window.CONFIG=CONFIG</script><meta name="generator" content="Hexo 7.2.0"></head><body><div class="container" id="container"><header class="header" id="header"><div class="header-inner"><nav class="header-nav header-nav--fixed"><div class="header-nav-inner"><div class="header-nav-menubtn"><i class="fas fa-bars"></i></div><div class="header-nav-menu"><div class="header-nav-menu-item"><a class="header-nav-menu-item__link" href="/"><span class="header-nav-menu-item__icon"><i class="fas fa-home"></i></span><span class="header-nav-menu-item__text">首页</span></a></div><div class="header-nav-menu-item"><a class="header-nav-menu-item__link" href="/archives/"><span class="header-nav-menu-item__icon"><i class="fas fa-folder-open"></i></span><span class="header-nav-menu-item__text">归档</span></a></div><div class="header-nav-menu-item"><a class="header-nav-menu-item__link" href="/categories/"><span class="header-nav-menu-item__icon"><i class="fas fa-layer-group"></i></span><span class="header-nav-menu-item__text">分类</span></a></div><div class="header-nav-menu-item"><a class="header-nav-menu-item__link" href="javascript:;" onclick="return!1"><span class="header-nav-menu-item__icon"><i class="fas fa-bars"></i></span><span class="header-nav-menu-item__text">其他</span></a><div class="header-nav-submenu"><div class="header-nav-submenu-item"><a class="header-nav-submenu-item__link" href="/friends/"><span class="header-nav-submenu-item__icon"><i class="fas fa-users"></i></span><span class="header-nav-submenu-item__text">友链</span></a></div><div class="header-nav-submenu-item"><a class="header-nav-submenu-item__link" href="/gallery/"><span class="header-nav-submenu-item__icon"><i class="fas fa-images"></i></span><span class="header-nav-submenu-item__text">相册</span></a></div></div></div><div class="header-nav-menu-item"><a class="header-nav-menu-item__link" href="/about/"><span class="header-nav-menu-item__icon"><i class="fas fa-user"></i></span><span class="header-nav-menu-item__text">关于</span></a></div><div class="header-nav-menu-item"><a class="header-nav-menu-item__link" target="_blank" rel="noopener" href="https://davidingplus.cn/"><span class="header-nav-menu-item__icon"><i class="fas fa-pager"></i></span><span class="header-nav-menu-item__text">站点主页</span></a></div></div><div class="header-nav-search"><span class="header-nav-search__icon"><i class="fas fa-search"></i></span><span class="header-nav-search__text">搜索</span></div><div class="header-nav-mode"><div class="mode"><div class="mode-track"><span class="mode-track-moon"></span><span class="mode-track-sun"></span></div><div class="mode-thumb"></div></div></div></div></nav><div class="header-banner"><div class="header-banner-info"><div class="header-banner-info__title">DavidingPlus's Blog</div><div class="header-banner-info__subtitle">🕊️ world peace</div></div><div class="header-banner-arrow"><div class="header-banner-arrow__icon"><i class="fas fa-angle-down"></i></div></div></div></div></header><main class="main" id="main"><div class="main-inner"><div class="content-wrap" id="content-wrap"><div class="content" id="content"><div id="is-post"></div><div class="post"><header class="post-header"><h1 class="post-title">数据库 期末复习</h1><div class="post-meta"><span class="post-meta-item post-meta-item--createtime"><span class="post-meta-item__icon"><i class="far fa-calendar-plus"></i></span><span class="post-meta-item__info">发表于</span><span class="post-meta-item__value">2023-09-19</span></span><span class="post-meta-item post-meta-item--updatetime"><span class="post-meta-item__icon"><i class="far fa-calendar-check"></i></span><span class="post-meta-item__info">更新于</span><span class="post-meta-item__value">2023-09-19</span></span><span class="post-meta-item post-meta-item--wordcount"><span class="post-meta-item__icon"><i class="far fa-file-word"></i></span><span class="post-meta-item__info">字数统计</span><span class="post-meta-item__value">8.3k</span></span><span class="post-meta-item post-meta-item--readtime"><span class="post-meta-item__icon"><i class="far fa-clock"></i></span><span class="post-meta-item__info">阅读时长</span><span class="post-meta-item__value">54分</span></span><span class="post-meta-item post-meta-item--visitors"><span class="post-meta-item__icon"><i class="fas fa-eye"></i></span><span class="post-meta-item__info">阅读次数</span><span class="post-meta-item__value" id="busuanzi_value_page_pv"></span></span></div></header><div class="post-body"><meta name="referrer" content="no-referrer"><h1 id="前言"><a href="#前言" class="heading-link"><i class="fas fa-link"></i></a><a class="markdownIt-Anchor" href="#前言"></a> 前言</h1><p><strong>数据库期末重点：</strong></p><p><strong>SQL编程–难度类似实验测评</strong></p><p><strong>关系模型—概念、关系运算</strong></p><p><strong>CDM设计—根据题目给出的需求，画出PD格式的CDM图</strong></p><p><strong>PDM设计—课件4-4数据库规范化设计</strong></p><p><strong>ODBC—概念、分级、方法</strong></p><p><strong>JDBC----概念、分级、编程</strong></p><p><strong>存储过程、触发器----难度类似实验</strong></p><p><strong>第七章考核点：5v，cap，base，四种nosql数据库类型和分类比较</strong></p><span id="more"></span><p>2023年，学院对各课程考核题型形式提出了统一要求，取消单选题、判断题的测试形式，更多采用综合考核能力的题型形式</p><p>此文档作为数据库系统的最新复习资料,部分截图来自授课PPT，严格按照教科书目录结构编写，方便结合教材查缺补漏，精华浓缩阐述清楚，看完的话应该有85分，部分概念(规范化、并发…)比较抽象需要看书可能才能理解清楚。</p><p>建议复习步骤：此文档–&gt;教科书–&gt;此文档。</p><h1 id="数据库及其系统概念"><a href="#数据库及其系统概念" class="heading-link"><i class="fas fa-link"></i></a><a class="markdownIt-Anchor" href="#数据库及其系统概念"></a> 数据库及其系统概念</h1><blockquote><ul><li>了解数据库、数据库管理系统、数据库系统等基本概念</li><li>理解数据模型与数据库类型关系</li><li>熟悉数据库系统组成及其各部分作用</li></ul></blockquote><p>数据库：按特定数据模型组织存储管理数据的文件集合</p><p>特点</p><ul><li>数据不重复</li><li>支持并发</li><li>数据结构独立于应用程序</li><li>数据的增删改查由数据库系统管理软件管理</li></ul><p>数据模型：事物对象数据特征结构的形式化表示，包括数据结构、数据操作、数据约束</p><p>数据结构：对象静态特征</p><p>数据操作：对象动态特征</p><p>数据约束：数据结构中数据之间的联系制约关系，数据动态变化的规则</p><p>数据模型-关系数据模型：采用“二维表”结构组织、存储和管理数据，并以关联列实现表之间的联系。</p><p><img class="lazyload lazyload-gif" src="/images/loading.svg" data-src="https://cdn.davidingplus.cn/images/2025/02/01/image-20230603193803070.png" alt="image-20230603193803070"></p><p>数据库系统（DS）</p><p>数据库应用程序：在DBMS支持下对数据库中数据进行访问处理</p><p>关系数据库数据内容：用户表（用户数据），系统表（元数据、索引数据、运行数据）</p><p>关系数据库对象组织：</p><ul><li>用户表：存储用户的应用数据</li><li>系统表：存储数据库系统自身数据</li><li>视图：通过虚拟表实现数据查询处理</li><li>索引：通过目录数据结构支持快速的数据查询</li><li>约束：对关系表及其数据施加规则</li><li>存储过程：在数据库内部实现特定功能程序的数据处理</li><li>触发器：在数据库内部实现数据操作事件触发自动执行的过程程序</li></ul><h1 id="关系模型"><a href="#关系模型" class="heading-link"><i class="fas fa-link"></i></a><a class="markdownIt-Anchor" href="#关系模型"></a> 关系模型</h1><h2 id="关系相关概念"><a href="#关系相关概念" class="heading-link"><i class="fas fa-link"></i></a><a class="markdownIt-Anchor" href="#关系相关概念"></a> 关系相关概念</h2><p>键：关系中可以唯一标识元组的属性列，其他的为非键列</p><p>候选键：多个列都可以作为键时，它们每一个均为候选键</p><p>主键：候选键中最具代表性的，唯一</p><p>复合键：关系中必须用多列才能唯一标识元组时，为复合主键</p><p>代理键：DBMS自动生成的数字序列主键，可替代复合主键</p><p>外键：关系中的关键字为另一个关系的主键，此时称该关系为另一个关系的从表</p><p>关系模式：关系名（<u>主键属性</u>，属性2，…，属性x）</p><h2 id="关系模型原理"><a href="#关系模型原理" class="heading-link"><i class="fas fa-link"></i></a><a class="markdownIt-Anchor" href="#关系模型原理"></a> 关系模型原理</h2><p>数据模型-关系模型：基于二维表结构存储数据实体及实体间联系</p><p>关系模型数据操作</p><p>集合：选择（select）、投影（project）、连接（join）、交（intersection）、并（union）、差（difference）</p><p>元组：行插入（Insert）、 修改（Update）、删除（Delete）</p><p>交并差：关系R与关系S需有相同属性组成（简单不赘述）</p><p>笛卡尔积×：R的属性列+S的属性列=新表属性列，元组进行排列组合</p><p>选择：σF®：在关系R中选出满足条件F的元组形成新的关系。(F：条件表达式)；对应where子句</p><p>投影：πA（R）：在R中选出若干属性列组成一个新关系。(A:属性组)；对应select子句</p><p>连接：从两个关系的笛卡尔积中选取属性间满足条件AθB的元组组成新的关系</p><p>条件连接</p><img class="lazyload lazyload-gif" src="/images/loading.svg" data-src="https://cdn.davidingplus.cn/images/2025/02/01/image-20250201003952106.png" alt="image-20250201003952106" style="zoom:60%"><p>等值连接-条件连接的特例：选取指定属性列的值相等的行，可以选择多个条件</p><img class="lazyload lazyload-gif" src="/images/loading.svg" data-src="https://cdn.davidingplus.cn/images/2025/02/01/image-20250201004007703.png" alt="image-20250201004007703" style="zoom:65%"><figure class="highlight sql"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> 列表</span><br><span class="line"><span class="keyword">FROM</span> 表<span class="number">1</span></span><br><span class="line"><span class="keyword">JOIN</span> 表<span class="number">2</span> <span class="keyword">ON</span> 表<span class="number">1.</span>列 <span class="operator">=</span> 表<span class="number">2.</span>列;</span><br></pre></td></tr></table></div></figure><p>自然连接-等值连接的特例：根据两个表中的所有相同属性列进行连接，连接后多个的相同属性列只保留一个</p><img class="lazyload lazyload-gif" src="/images/loading.svg" data-src="https://cdn.davidingplus.cn/images/2025/02/01/image-20250201004025422.png" alt="image-20250201004025422" style="zoom:75%"><figure class="highlight sql"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> 列表</span><br><span class="line"><span class="keyword">FROM</span> 表<span class="number">1</span></span><br><span class="line"><span class="keyword">NATURAL</span> <span class="keyword">JOIN</span> 表<span class="number">2</span>;</span><br></pre></td></tr></table></div></figure><p>外连接-自然连接的特例：自然连接只有相同属性列的值相同才返回，外连接中若有一方的行的共同属性列没有找到与之匹配的行，则也保留该行，以NULL填充。左外连接、右外连接、全外连接</p><p>除（了解；t代表元组、XY代表属性）</p><img class="lazyload lazyload-gif" src="/images/loading.svg" data-src="https://cdn.davidingplus.cn/images/2025/02/01/image-20250201004048581.png" alt="image-20250201004048581" style="zoom:65%"><p>关系模型完整性约束：实体完整性约束（主键非空且不唯一）、参照完整性约束（主从表的外键主键一致）、用户自定义完整性约束</p><h1 id="sql语句"><a href="#sql语句" class="heading-link"><i class="fas fa-link"></i></a><a class="markdownIt-Anchor" href="#sql语句"></a> SQL语句</h1><h2 id="sql概述"><a href="#sql概述" class="heading-link"><i class="fas fa-link"></i></a><a class="markdownIt-Anchor" href="#sql概述"></a> sql概述</h2><p>数据定义语言（DDL）：创建修改删除数据库对象；create/drop/alter database/table/index</p><p>数据操纵语言（DML）：增删改数据；insert/update/delete</p><p>数据查询语言（DQL）：数据查询；</p><p>数据控制语言（DCL）：数据库对象访问控制；grant/deny/revoke</p><p>事物处理语言（TPL）：事物处理；begin transaction/commit/rollback</p><p>游标控制语言（CCL）：游标操作；declare cursor/fetch into/close cursor</p><h2 id="数据定义语句"><a href="#数据定义语句" class="heading-link"><i class="fas fa-link"></i></a><a class="markdownIt-Anchor" href="#数据定义语句"></a> 数据定义语句</h2><h3 id="数据库"><a href="#数据库" class="heading-link"><i class="fas fa-link"></i></a><a class="markdownIt-Anchor" href="#数据库"></a> 数据库</h3><figure class="highlight sql"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> DATABASE CourseDB;</span><br><span class="line"></span><br><span class="line"><span class="keyword">ALTER</span> DATABASE CourseDB RENAME <span class="keyword">TO</span> CourseManageDB;</span><br><span class="line"></span><br><span class="line"><span class="keyword">DROP</span> DATABASE CourseManageDB；</span><br></pre></td></tr></table></div></figure><h3 id="数据库表"><a href="#数据库表" class="heading-link"><i class="fas fa-link"></i></a><a class="markdownIt-Anchor" href="#数据库表"></a> 数据库表</h3><p>格式：列名+数据类型+列完整性约束</p><p>列完整行约束</p><p>PRIMARY KEY——单列主键</p><p>NOT NULL——非空值</p><p>NULL——空值</p><p>UNIQUE——值唯一</p><p>CHECK——有效性检查</p><p>DEFAULT——缺省值</p><p>表约束：可定义复合主键、代理键、外键，可以命名约束</p><figure class="highlight sql"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE  TABLE</span>  Student</span><br><span class="line">(StudentID      <span class="type">char</span>(<span class="number">13</span>)    <span class="keyword">PRIMARY  KEY</span>,</span><br><span class="line"> StudentName    <span class="type">varchar</span>(<span class="number">10</span>)	<span class="keyword">NOT NULL</span> <span class="keyword">UNIQUE</span>,</span><br><span class="line"> StudentGender  <span class="type">char</span>(<span class="number">2</span>)     <span class="keyword">NULL</span>     <span class="keyword">CHECK</span>(StudentGender <span class="keyword">IN</span>(<span class="string">&#x27;男&#x27;</span>,<span class="string">&#x27;女&#x27;</span>)),</span><br><span class="line"> BirthDay       <span class="type">date</span>        <span class="keyword">NULL</span>,</span><br><span class="line"> Major          <span class="type">varchar</span>(<span class="number">30</span>) <span class="keyword">NULL</span>     <span class="keyword">DEFAULT</span> <span class="string">&#x27;本科生&#x27;</span>,</span><br><span class="line"> StudentPhone	<span class="type">char</span>(<span class="number">11</span>)    <span class="keyword">NULL</span></span><br><span class="line"> <span class="comment">--或者</span></span><br><span class="line"> <span class="keyword">CONSTRAINT</span> Student_PK <span class="keyword">PRIMARY Key</span>(StudentID,StudentName)</span><br><span class="line">);</span><br><span class="line"> </span><br><span class="line"><span class="keyword">ALTER TABLE</span> STUDENT <span class="keyword">ADD</span> <span class="operator">&lt;</span>.<span class="operator">&gt;</span><span class="operator">&lt;</span>.<span class="operator">&gt;</span>[..];</span><br><span class="line"><span class="keyword">ALTER TABLE</span> STUDENT <span class="keyword">DROP</span> <span class="keyword">COLUMN</span><span class="operator">&lt;</span>.<span class="operator">&gt;</span>;</span><br><span class="line"><span class="keyword">ALTER TABLE</span> STUDENT <span class="keyword">DROP</span> <span class="keyword">CONSTRAINT</span><span class="operator">&lt;</span>.<span class="operator">&gt;</span>;</span><br><span class="line"><span class="keyword">ALTER TABLE</span> STUDENT RENAME <span class="keyword">TO</span><span class="operator">&lt;&gt;</span>;</span><br><span class="line"><span class="keyword">ALTER TABLE</span> STUDENT RENAME <span class="operator">&lt;&gt;</span> <span class="keyword">TO</span> <span class="operator">&lt;&gt;</span>;</span><br><span class="line"><span class="keyword">ALTER TABLE</span> STUDENT <span class="keyword">ALTER</span> <span class="keyword">COLUMN</span><span class="operator">&lt;&gt;</span> TYPE<span class="operator">&lt;&gt;</span>;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span> <span class="operator">&lt;&gt;</span>;</span><br></pre></td></tr></table></div></figure><p>表约束定义代理键：有时为了方便数据处理，可以使用代理键去替代复合主键</p><figure class="highlight sql"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE  TABLE</span>  Plan</span><br><span class="line">( CoursePlanID	serial		    <span class="keyword">NOT  NULL</span>,</span><br><span class="line">  CourseID  	<span class="type">char</span>(<span class="number">4</span>)  		<span class="keyword">NOT  NULL</span>,</span><br><span class="line">  TeacherID  	<span class="type">char</span>(<span class="number">4</span>)  		<span class="keyword">NOT  NULL</span>,</span><br><span class="line">  CourseRoom  	<span class="type">varchar</span>(<span class="number">30</span>),</span><br><span class="line">  CourseTime  	<span class="type">varchar</span>(<span class="number">30</span>),</span><br><span class="line">  Note  		<span class="type">varchar</span>(<span class="number">50</span>),</span><br><span class="line">  <span class="keyword">CONSTRAINT</span>	CoursePlan_PK	<span class="keyword">PRIMARY Key</span>(CoursePlanID)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></div></figure><p>表约束定义外键</p><figure class="highlight sql"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE  TABLE</span>  Register</span><br><span class="line">( CourseRegID  	serial	    <span class="keyword">NOT  NULL</span>,</span><br><span class="line">  CoursePlanID  <span class="type">Int</span>  		<span class="keyword">NOT  NULL</span>,</span><br><span class="line">  StudentID  	<span class="type">char</span>(<span class="number">13</span>),</span><br><span class="line">  Note  		<span class="type">varchar</span>(<span class="number">30</span>),</span><br><span class="line">  <span class="keyword">CONSTRAINT</span>	CourseRegID_PK	<span class="keyword">PRIMARY Key</span>(CourseRegID),</span><br><span class="line">  <span class="keyword">CONSTRAINT</span>	CoursePlanID_FK	<span class="keyword">FOREIGN Key</span>(CoursePlanID)</span><br><span class="line">	<span class="keyword">REFERENCES</span>  Plan(CoursePlanID)</span><br><span class="line">    <span class="keyword">ON</span> <span class="keyword">DELETE</span> CASCADE,</span><br><span class="line">  <span class="keyword">CONSTRAINT</span>	StudentID_FK	<span class="keyword">FOREIGN KEY</span>(StudentID)</span><br><span class="line">	<span class="keyword">REFERENCES</span>  Student(StudentID)</span><br><span class="line">    <span class="keyword">ON</span> <span class="keyword">DELETE</span> CASCADE</span><br><span class="line">);</span><br><span class="line"></span><br></pre></td></tr></table></div></figure><h3 id="数据库索引"><a href="#数据库索引" class="heading-link"><i class="fas fa-link"></i></a><a class="markdownIt-Anchor" href="#数据库索引"></a> 数据库索引</h3><p>索引（index）：将关系表按照指定列的取值顺序组织元组数据的数据结构，加快查询，占用额外存储空间、开销较大</p><figure class="highlight sql"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> INDEX Birthday_Idx <span class="keyword">ON</span>  STUDENT(Birthday);</span><br><span class="line"></span><br><span class="line"><span class="keyword">ALTER</span> INDEX Birthday_Idx RENAME <span class="keyword">TO</span> Bday_Idx;</span><br><span class="line"></span><br><span class="line"><span class="keyword">DROP</span> INDEX bday_idx;</span><br></pre></td></tr></table></div></figure><h2 id="数据操纵语句"><a href="#数据操纵语句" class="heading-link"><i class="fas fa-link"></i></a><a class="markdownIt-Anchor" href="#数据操纵语句"></a> 数据操纵语句</h2><h3 id="数据插入"><a href="#数据插入" class="heading-link"><i class="fas fa-link"></i></a><a class="markdownIt-Anchor" href="#数据插入"></a> 数据插入</h3><figure class="highlight sql"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">INSERT INTO</span> Student <span class="keyword">VALUES</span>(<span class="string">&#x27;2017220101105&#x27;</span>,<span class="string">&#x27;柳因&#x27;</span>,<span class="string">&#x27;女&#x27;</span>,<span class="string">&#x27;1999-04-23&#x27;</span>,<span class="string">&#x27;软件工程&#x27;</span>, <span class="string">&#x27;liuyin@163.com&#x27;</span>);</span><br></pre></td></tr></table></div></figure><h3 id="数据修改"><a href="#数据修改" class="heading-link"><i class="fas fa-link"></i></a><a class="markdownIt-Anchor" href="#数据修改"></a> 数据修改</h3><figure class="highlight sql"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">UPDATE</span>  Student</span><br><span class="line"><span class="keyword">SET</span>  Email<span class="operator">=</span><span class="string">&#x27;zhaodong@163.com&#x27;</span></span><br><span class="line"><span class="keyword">WHERE</span>   StudentName<span class="operator">=</span><span class="string">&#x27;赵东&#x27;</span>;</span><br></pre></td></tr></table></div></figure><h3 id="数据删除"><a href="#数据删除" class="heading-link"><i class="fas fa-link"></i></a><a class="markdownIt-Anchor" href="#数据删除"></a> 数据删除</h3><figure class="highlight sql"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">DELETE</span> </span><br><span class="line"><span class="keyword">FROM</span>  STUDENT</span><br><span class="line"><span class="keyword">WHERE</span>   StudentName<span class="operator">=</span><span class="string">&#x27;张亮&#x27;</span>;</span><br></pre></td></tr></table></div></figure><h2 id="数据查询语句"><a href="#数据查询语句" class="heading-link"><i class="fas fa-link"></i></a><a class="markdownIt-Anchor" href="#数据查询语句"></a> 数据查询语句</h2><h3 id="单表查询"><a href="#单表查询" class="heading-link"><i class="fas fa-link"></i></a><a class="markdownIt-Anchor" href="#单表查询"></a> 单表查询</h3><figure class="highlight sql"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 通用结构</span></span><br><span class="line"><span class="keyword">SELECT</span>  [<span class="keyword">ALL</span><span class="operator">|</span><span class="keyword">DISTINCT</span>]  <span class="operator">&lt;</span>目标列<span class="operator">&gt;</span>[，<span class="operator">&lt;</span>目标列<span class="operator">&gt;</span>…]</span><br><span class="line">[ <span class="keyword">INTO</span> <span class="operator">&lt;</span>新表<span class="operator">&gt;</span> ]</span><br><span class="line"><span class="keyword">FROM</span>  <span class="operator">&lt;</span>表名<span class="operator">|</span>视图名<span class="operator">&gt;</span>[，<span class="operator">&lt;</span>表名<span class="operator">|</span>视图名<span class="operator">&gt;</span>…]</span><br><span class="line">[ <span class="keyword">WHERE</span>  <span class="operator">&lt;</span>条件表达式<span class="operator">&gt;</span> ]</span><br><span class="line">[ <span class="keyword">GROUP</span> <span class="keyword">BY</span>  <span class="operator">&lt;</span>列名<span class="operator">&gt;</span> [<span class="keyword">HAVING</span> <span class="operator">&lt;</span>条件表达式<span class="operator">&gt;</span> ]]</span><br><span class="line">[ <span class="keyword">ORDER</span> <span class="keyword">BY</span>  <span class="operator">&lt;</span>列名<span class="operator">&gt;</span> [ <span class="keyword">ASC</span> <span class="operator">|</span> <span class="keyword">DESC</span> ] ];</span><br><span class="line"></span><br><span class="line"><span class="comment">-- BETWEEN AND 限制列值范围</span></span><br><span class="line"><span class="keyword">SELECT</span>  <span class="operator">*</span></span><br><span class="line"><span class="keyword">FROM</span>  STUDENT</span><br><span class="line"><span class="keyword">WHERE</span> BirthDay <span class="keyword">BETWEEN</span> ‘<span class="number">2000</span><span class="number">-01</span><span class="number">-01</span>’ <span class="keyword">AND</span> ‘<span class="number">2000</span><span class="number">-12</span><span class="number">-30</span>’;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- LIKE 通配符&#x27;_&#x27;代表一个字符&#x27;%&#x27;代表一个或多个字符 </span></span><br><span class="line"><span class="keyword">SELECT</span>  <span class="operator">*</span></span><br><span class="line"><span class="keyword">FROM</span>  STUDENT</span><br><span class="line"><span class="keyword">WHERE</span>  Email  <span class="keyword">LIKE</span>  ’<span class="operator">%</span><span class="variable">@163</span>.com’;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- AND\OR\NOT 逻辑运算符</span></span><br><span class="line"><span class="keyword">SELECT</span>  StudentID, StudentName, StudentGender, Major</span><br><span class="line"><span class="keyword">FROM</span>  STUDENT</span><br><span class="line"><span class="keyword">WHERE</span>  Major<span class="operator">=</span>’软件工程’  <span class="keyword">AND</span>  StudentGender<span class="operator">=</span>’男’;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- IN 限定范围</span></span><br><span class="line"><span class="keyword">SELECT</span>  StudentID, StudentName, StudentGender, Major</span><br><span class="line"><span class="keyword">FROM</span>  STUDENT</span><br><span class="line"><span class="keyword">WHERE</span>  Major <span class="keyword">IN</span>  (<span class="string">&#x27;计算机应用&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- ORDER BY &lt;&gt; ASC/DESC 默认升序ASC</span></span><br><span class="line"><span class="comment">-- 多个列排序时，写在前面排序的基础上满足后面的</span></span><br><span class="line"><span class="keyword">SELECT</span>  <span class="operator">*</span></span><br><span class="line"><span class="keyword">FROM</span>  STUDENT</span><br><span class="line"><span class="keyword">ORDER</span>  <span class="keyword">BY</span>  Birthday <span class="keyword">DESC</span> ,  StudentName  <span class="keyword">ASC</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 内置函数</span></span><br><span class="line"><span class="keyword">SELECT</span>  COUNT（<span class="operator">*</span>） <span class="keyword">AS</span>  学生人数</span><br><span class="line"><span class="keyword">FROM</span>  Student;</span><br><span class="line"><span class="keyword">SELECT</span>  Min（Birthday） <span class="keyword">AS</span> 最大年龄，Max（Birthday） <span class="keyword">AS</span> 最小年龄</span><br><span class="line"><span class="keyword">FROM</span>  Student;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- GROUP BY &lt;&gt; HAVING </span></span><br><span class="line"><span class="comment">-- 专业统计STUDENT表中男生人数，但限定只显示人数大于2的人数</span></span><br><span class="line"><span class="keyword">SELECT</span>  Major  <span class="keyword">AS</span> 专业,  COUNT（StudentID） <span class="keyword">AS</span> 学生人数</span><br><span class="line"><span class="keyword">FROM</span>  Student</span><br><span class="line"><span class="keyword">WHERE</span>  StudentGender<span class="operator">=</span>’男’</span><br><span class="line"><span class="keyword">GROUP</span>  <span class="keyword">BY</span>  Major</span><br><span class="line"><span class="keyword">HAVING</span>  <span class="built_in">COUNT</span>(<span class="operator">*</span>)<span class="operator">&gt;</span><span class="number">2</span>;</span><br></pre></td></tr></table></div></figure><h3 id="多表关联查询"><a href="#多表关联查询" class="heading-link"><i class="fas fa-link"></i></a><a class="markdownIt-Anchor" href="#多表关联查询"></a> 多表关联查询</h3><p>子查询</p><figure class="highlight sql"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span>  TeacherID, TeacherName, TeacherTitle</span><br><span class="line"><span class="keyword">FROM</span>  Teacher</span><br><span class="line"><span class="keyword">WHERE</span>  CollegeID  <span class="keyword">IN</span></span><br><span class="line">        (<span class="keyword">SELECT</span>  CollegeID  </span><br><span class="line">     <span class="keyword">FROM</span>  College</span><br><span class="line">     <span class="keyword">WHERE</span>  CollegeName<span class="operator">=</span><span class="string">&#x27;计算机学院&#x27;</span>);</span><br><span class="line"></span><br></pre></td></tr></table></div></figure><p>连接查询</p><figure class="highlight sql"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span>  B.CollegeName <span class="keyword">AS</span> 学院名称,  A.TeacherID  <span class="keyword">AS</span> 编号, A.TeacherName  <span class="keyword">AS</span> 姓名,  A.TeacherGender  <span class="keyword">AS</span> 性别,  A. TeacherTitle  <span class="keyword">AS</span> 职称</span><br><span class="line"><span class="keyword">FROM</span>  Teacher  <span class="keyword">AS</span>  A，College  <span class="keyword">AS</span>  B</span><br><span class="line"><span class="keyword">WHERE</span>  A.CollegeID<span class="operator">=</span>B.CollegeID </span><br><span class="line"><span class="keyword">ORDER</span>  <span class="keyword">BY</span>  B.CollegeName, A.TeacherID;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- JOIN ON 内连接</span></span><br><span class="line"><span class="keyword">SELECT</span>  B.CollegeName <span class="keyword">AS</span> 学院名称,  A.TeacherID  <span class="keyword">AS</span> 编号, A.TeacherName  <span class="keyword">AS</span> 姓名,  A.TeacherGender  <span class="keyword">AS</span> 性别,  A. TeacherTitle  <span class="keyword">AS</span> 职称</span><br><span class="line"><span class="keyword">FROM</span>  TEACHER  <span class="keyword">AS</span>  A  <span class="keyword">JOIN</span>  COLLEGE  <span class="keyword">AS</span>  B</span><br><span class="line"><span class="keyword">ON</span>  A.CollegeID<span class="operator">=</span>B.CollegeID </span><br><span class="line"><span class="keyword">ORDER</span>  <span class="keyword">BY</span>  B.CollegeName, A.TeacherID;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- LEFT JOIN/RIGHT JOIN/FULL JOIN 外连接</span></span><br><span class="line"><span class="keyword">SELECT</span> C.CourseName <span class="keyword">AS</span> 课程名称, T.TeacherName <span class="keyword">AS</span> 教师, </span><br><span class="line"><span class="built_in">COUNT</span>  (R.CoursePlanID)  <span class="keyword">AS</span> 选课人数</span><br><span class="line"><span class="keyword">FROM</span>  COURSE  <span class="keyword">AS</span>  C  <span class="keyword">JOIN</span>  PLAN  <span class="keyword">AS</span>  P  </span><br><span class="line"><span class="keyword">ON</span>  C.CourseID<span class="operator">=</span>P.CourseID </span><br><span class="line"><span class="keyword">JOIN</span>  TEACHER  <span class="keyword">AS</span>  T  <span class="keyword">ON</span>  P.TeacherID<span class="operator">=</span>T.TeacherID</span><br><span class="line"><span class="keyword">LEFT</span>  <span class="keyword">JOIN</span>  REGISTER  <span class="keyword">AS</span>  R  <span class="keyword">ON</span>  P.CoursePlanID<span class="operator">=</span>R.CoursePlanID</span><br><span class="line"><span class="keyword">GROUP</span>  <span class="keyword">BY</span> C.CourseName, T.TeacherName;</span><br></pre></td></tr></table></div></figure><h1 id="数据库设计"><a href="#数据库设计" class="heading-link"><i class="fas fa-link"></i></a><a class="markdownIt-Anchor" href="#数据库设计"></a> 数据库设计</h1><h2 id="概述"><a href="#概述" class="heading-link"><i class="fas fa-link"></i></a><a class="markdownIt-Anchor" href="#概述"></a> 概述</h2><h3 id="数据库开发过程"><a href="#数据库开发过程" class="heading-link"><i class="fas fa-link"></i></a><a class="markdownIt-Anchor" href="#数据库开发过程"></a> 数据库开发过程</h3><img class="lazyload lazyload-gif" src="/images/loading.svg" data-src="https://cdn.davidingplus.cn/images/2025/02/01/image-20230603193850316.png" alt="image-20230603193850316" style="zoom:67%"><h3 id="数据库结构模型设计-数据库结构模型"><a href="#数据库结构模型设计-数据库结构模型" class="heading-link"><i class="fas fa-link"></i></a><a class="markdownIt-Anchor" href="#数据库结构模型设计-数据库结构模型"></a> 数据库结构模型设计-数据库结构模型</h3><div class="table-container"><table><thead><tr><th>概念数据模型 Conceptual Data Model (CDM)</th><th style="text-align:left">从用户角度所建模的系统数据对象及其关系，它帮助用户分析信息系统的数据结构关系。</th></tr></thead><tbody><tr><td>逻辑数据模型 Logic Data Mode(LDM)</td><td style="text-align:left">从<strong>系统分析员</strong>角度所建模的系统数据对象逻辑结构关系，它帮助开发人员分析信息系统的逻辑数据结构。</td></tr><tr><td>物理数据模型 Physical Data Model (PDM)</td><td style="text-align:left">从系统设计人员角度所建模的系统数据物理存储及结构关系，它针对设计者具体定义信息系统的数据库表结构。</td></tr></tbody></table></div><h2 id="e-r模型方法"><a href="#e-r模型方法" class="heading-link"><i class="fas fa-link"></i></a><a class="markdownIt-Anchor" href="#e-r模型方法"></a> E-R模型方法</h2><blockquote><p>“实体-联系模型”（Entity-Relationship Model）的简称。它是一种描述现实世界<strong>概念数据模型</strong>、<strong>逻辑数据模型</strong>的有效方法，基本元素有实体、属性、标识符和联系</p></blockquote><p>联系度数：联系中关联的实体数目</p><p>二元联系-基数：实体的实例与另一实体实例存在的数量对应关系，1/n，表示最大基数</p><p>实体参与关系：可选/强制，表示最小基数 p;</p><img class="lazyload lazyload-gif" src="/images/loading.svg" data-src="https://cdn.davidingplus.cn/images/2025/02/01/image-20230603193923231.png" alt="image-20230603193923231" style="zoom:67%"><p>实体继承联系：表示实体的相似性，有公共属性的是父实体，有特殊性的是子实体</p><img class="lazyload lazyload-gif" src="/images/loading.svg" data-src="https://cdn.davidingplus.cn/images/2025/02/01/image-20230603193933407.png" alt="image-20230603193933407" style="zoom:67%"> <img class="lazyload lazyload-gif" src="/images/loading.svg" data-src="https://cdn.davidingplus.cn/images/2025/02/01/image-20230603193945024.png" alt="image-20230603193945024" style="zoom:67%"><p>强弱实体联系：弱实体的存在必须以强实体的存在为前提，这是一个相对的概念</p><img class="lazyload lazyload-gif" src="/images/loading.svg" data-src="https://cdn.davidingplus.cn/images/2025/02/01/image-20230603193954175.png" alt="image-20230603193954175" style="zoom:67%"> <img class="lazyload lazyload-gif" src="/images/loading.svg" data-src="https://cdn.davidingplus.cn/images/2025/02/01/image-20230603194004354.png" alt="image-20230603194004354" style="zoom:67%"><p>扩展建模实例o</p><img class="lazyload lazyload-gif" src="/images/loading.svg" data-src="https://cdn.davidingplus.cn/images/2025/02/01/image-20230603194028029.png" alt="image-20230603194028029" style="zoom:67%"><h3 id="概念数据模型"><a href="#概念数据模型" class="heading-link"><i class="fas fa-link"></i></a><a class="markdownIt-Anchor" href="#概念数据模型"></a> 概念数据模型</h3><p>概念数据模型设计一般是采用E-R模型方法进行建模设计</p><h3 id="cdmldmpdm模型转换设计"><a href="#cdmldmpdm模型转换设计" class="heading-link"><i class="fas fa-link"></i></a><a class="markdownIt-Anchor" href="#cdmldmpdm模型转换设计"></a> CDM/LDM/PDM模型转换设计</h3><p>当使用关系数据库时，物理数据模型（PDM）即为关系模型。CDM/LDM到PDM的转换其实就是E-R模型到关系模型的转换。</p><img class="lazyload lazyload-gif" src="/images/loading.svg" data-src="https://cdn.davidingplus.cn/images/2025/02/01/image-20230603194202048.png" alt="image-20230603194202048" style="zoom:67%"><p>CDM/LDM转换</p><ol><li>LDM将CDM的多对多实体联系转化为易于关系数据库实现的一对多实体联系</li><li>LDm将CDM中的标识符依赖实体进一步细化，并区分主键标识符&lt; pi &gt;和外键标识符&lt; fi &gt;，以便数据模型规范化处理</li></ol><p>E-R模型到关系模型转换原理：</p><ol><li>将每一个实体转换成一个关系表，实体属性转换为关系表的列，实体标识符转换为关系表的主键或外键。</li><li>将实体之间的联系转化为关系表之间的参照完整性约束。</li></ol><p>弱实体转换为关系表</p><p><img class="lazyload lazyload-gif" src="/images/loading.svg" data-src="https://cdn.davidingplus.cn/images/2025/02/01/image-20230603194222701.png" alt="image-20230603194222701"></p><p><img class="lazyload lazyload-gif" src="/images/loading.svg" data-src="https://cdn.davidingplus.cn/images/2025/02/01/image-20230603194229345.png" alt="image-20230603194229345"></p><p>实体联系转换</p><img class="lazyload lazyload-gif" src="/images/loading.svg" data-src="https://cdn.davidingplus.cn/images/2025/02/01/image-20230603194242124.png" alt="image-20230603194242124" style="zoom:67%"><p><img class="lazyload lazyload-gif" src="/images/loading.svg" data-src="https://cdn.davidingplus.cn/images/2025/02/01/image-20230603194250887.png" alt="image-20230603194250887"></p><p><img class="lazyload lazyload-gif" src="/images/loading.svg" data-src="https://cdn.davidingplus.cn/images/2025/02/01/image-20230603194259344.png" alt="image-20230603194259344"></p><p>实体继承联系转换</p><p>将父表中的主键放置到子表中，既做主键又做外键。</p><p>实体递归联系转换</p><p><img class="lazyload lazyload-gif" src="/images/loading.svg" data-src="https://cdn.davidingplus.cn/images/2025/02/01/image-20230603194328262.png" alt="image-20230603194328262"></p><p><img class="lazyload lazyload-gif" src="/images/loading.svg" data-src="https://cdn.davidingplus.cn/images/2025/02/01/image-20230603194334061.png" alt="image-20230603194334061"></p><h2 id="数据库规范化设计"><a href="#数据库规范化设计" class="heading-link"><i class="fas fa-link"></i></a><a class="markdownIt-Anchor" href="#数据库规范化设计"></a> 数据库规范化设计</h2><p>通常在LDM时期进行规范化设计完善，减少冗余数据，设计合理依赖约束关系，降低维护数据完整性一致性的工作量，访问更高效</p><p>问题：一个表中存在多个主题的数据，且大量重复出现</p><h3 id="函数依赖理论"><a href="#函数依赖理论" class="heading-link"><i class="fas fa-link"></i></a><a class="markdownIt-Anchor" href="#函数依赖理论"></a> 函数依赖理论</h3><blockquote><p>在关系模式R（U）中， U 为关系R的属性集合，X和Y为属性U的子集。设t，s是关系R中的任意两个元组，如果t[X] = s[X]，则t[Y] = s[Y]。那么称Y函数依赖于X，表示为X→Y。此时<strong>函数依赖的左部称为决定因子</strong>，<strong>右部称为依赖函数</strong>。决定因子和依赖函数都是属性的集合。函数依赖反映属性或属性组之间相互依存、互相制约的关系，即关系表中属性之间的依赖关系。</p></blockquote><p>完全函数依赖</p><blockquote><p>设X、Y是某关系的不同属性集，如X→Y，且不存在X中的子集 X’使X’→Y，则Y称完全函数依赖，否则称Y部分函数依赖。</p></blockquote><p>对于关系R（<u>X</u>, <u>Y</u>, N, O, P），其中（X，Y）为复合主键，若其它属性N,O,P都完整依赖于该复合主键，则称关系R为完全函数依赖。反之，其它属性N,O,P仅依赖于X，或仅依赖于Y，则称R为部分函数依赖。</p><p>函数传递依赖</p><p>对于关系R（<u>X</u>, N, O, P），其中X为主键，若属性N依赖于X，<strong>而X不依赖于N</strong>，属性O依赖于N。则属性O函数传递依赖于X。</p><p>多值函数依赖</p><p>对于教学关系R（课程, 教师, 课程参考书），一门课程可以有多个任课教师，也可以有多本参考书；每个任课教师可以任意选择他的参考书。该关系存在多值函数依赖。</p><h3 id="关系规范化范式"><a href="#关系规范化范式" class="heading-link"><i class="fas fa-link"></i></a><a class="markdownIt-Anchor" href="#关系规范化范式"></a> 关系规范化范式</h3><p>1NF：关系表中的属性不可再细分，否则该表不是关系表</p><p>2NF：1NF基础上，消除关系中的属性部分函数依赖(多在复合主键里面)</p><blockquote><p>有一个关系（<u>A</u>,<u>B</u>,N,O,P）,其复合主键为（A,B）,那么N,O,P这三个非键属性都不存在只依赖A或只依赖B情况，则该关系满足第2范式,反之,不满足第2范式。</p></blockquote><p>3NF：2NF基础上，切断属性传递函数依赖</p><blockquote><p>若有一个关系（A,N,O,P）,主键为（A）,那么非键属性N,O或P都不能由单个的N,O或P或它们的组合所确定。该关系满足第3范式。</p></blockquote><p><strong>BCNF：所有函数依赖的决定因子都是候选键</strong></p><p><strong>4NF：BCNF基础上，消除了多值函数依赖</strong></p><h3 id="逆规范化处理"><a href="#逆规范化处理" class="heading-link"><i class="fas fa-link"></i></a><a class="markdownIt-Anchor" href="#逆规范化处理"></a> 逆规范化处理</h3><p>规范化过高也会导致数据库性能降低，因此要适当降低规范化范式约束，允许适当的数据冗余性，以获取数据访问性能。可以通过增加冗余列或派生列，多个表合并为一个表进行处理。</p><h1 id="数据库管理"><a href="#数据库管理" class="heading-link"><i class="fas fa-link"></i></a><a class="markdownIt-Anchor" href="#数据库管理"></a> 数据库管理</h1><h2 id="概述-2"><a href="#概述-2" class="heading-link"><i class="fas fa-link"></i></a><a class="markdownIt-Anchor" href="#概述-2"></a> 概述</h2><p>包括性能索引查询并发管理、角色用户对象权限管理、安全备份恢复等。</p><p>pgadmin4-Postgresql的数据库管理工具</p><h2 id="事务管理"><a href="#事务管理" class="heading-link"><i class="fas fa-link"></i></a><a class="markdownIt-Anchor" href="#事务管理"></a> 事务管理</h2><p>防止业务处理单元的一组操作中某一步出现错误导致混乱，事务是DBMS执行的最小任务单元、故障恢复单元、并发控制任务单元</p><p>生命周期状态变迁图</p><p><img class="lazyload lazyload-gif" src="/images/loading.svg" data-src="https://cdn.davidingplus.cn/images/2025/02/01/image-20230603194419185.png" alt="image-20230603194419185"></p><p>事务ACID特性</p><ul><li>原子性（Atomicity）：事务所有操作在数据库中要么全部执行，要么全部不执行。</li><li>一致性（Consistency）：事务多次执行，其结果应一致。</li><li>隔离性（Isolation）：事务与事务之间隔离，并发执行透明。</li><li>持续性（Durability ）：事务完成后，数据改变必须是永久的。</li></ul><figure class="highlight sql"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">START</span> TRANSACTION;</span><br><span class="line"><span class="keyword">INSERT  INTO</span> college( collegeID, collegename)<span class="keyword">VALUES</span> (<span class="string">&#x27;004&#x27;</span>, <span class="string">&#x27;外语学院&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT  INTO</span> college( collegeID, collegename)<span class="keyword">VALUES</span> (<span class="string">&#x27;005&#x27;</span>, <span class="string">&#x27;数学学院&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT  INTO</span> college( collegeID, collegename)<span class="keyword">VALUES</span> (<span class="string">&#x27;006&#x27;</span>, <span class="string">&#x27;临床医学院&#x27;</span>);</span><br><span class="line"><span class="keyword">COMMIT</span>;</span><br></pre></td></tr></table></div></figure><h2 id="并发控制"><a href="#并发控制" class="heading-link"><i class="fas fa-link"></i></a><a class="markdownIt-Anchor" href="#并发控制"></a> 并发控制</h2><h3 id="事务调度"><a href="#事务调度" class="heading-link"><i class="fas fa-link"></i></a><a class="markdownIt-Anchor" href="#事务调度"></a> 事务调度</h3><p>多个事务在DBMS同时运行可能对共享数据同时访问，需要加以约束控制按照恰当顺序访问，否则导致数据不一致和死锁。在DBMS中，为使并发事务调度实现的处理结果与串行化调度处理结果一致，事务管理器将并发执行事务的SQL数据操作请求提交给并发控制调度器。由并发控制调度器将各个事务的SQL数据操作请求按照一定顺序进行调度执行，并完成对数据库缓冲区的读写操作。</p><h4 id="数据不一致问题"><a href="#数据不一致问题" class="heading-link"><i class="fas fa-link"></i></a><a class="markdownIt-Anchor" href="#数据不一致问题"></a> 数据不一致问题</h4><p>丢失更新</p><p>T1、T2两个事务并发执行，它们均对数据库共享数据A进行了非锁定资源的读写操作。当事务T1和T2均读入该共享数据A并修改，T2提交的结果破坏了T1提交的结果，导致T1的修改被丢失。</p><p>不可重复读</p><p><img class="lazyload lazyload-gif" src="/images/loading.svg" data-src="https://cdn.davidingplus.cn/images/2025/02/01/image-20230603194431807.png" alt="image-20230603194431807"></p><p>幻象读</p><p>事务T1按一定条件从数据库中读取某些数据记录后，事务T2在其中插入了一些记录，当T1再次按相同条件读取数据时，发现多了一些记录。称为幻象读取。与不可重复读类似。</p><p>脏数据读取</p><p><img class="lazyload lazyload-gif" src="/images/loading.svg" data-src="https://cdn.davidingplus.cn/images/2025/02/01/image-20230603194438438.png" alt="image-20230603194438438"></p><h3 id="锁机制"><a href="#锁机制" class="heading-link"><i class="fas fa-link"></i></a><a class="markdownIt-Anchor" href="#锁机制"></a> 锁机制</h3><p>事务对共享数据加锁访问，锁的粒度由数据库到表页面行</p><ul><li>排它锁定(Lock-X)——锁定后，不允许其它事务对共享数据再加锁</li><li>共享锁定(Lock-S)——锁定后，只允许其它事务对共享数据添加读取锁</li></ul><p>锁的相容性：排他锁与其他锁均不相容，共享锁之间相容</p><h4 id="加锁协议"><a href="#加锁协议" class="heading-link"><i class="fas fa-link"></i></a><a class="markdownIt-Anchor" href="#加锁协议"></a> 加锁协议</h4><p>一级加锁协议：对共享数据修改时执行排它锁定指令，直到该事务处理完成才解锁。只能避免丢失更新问题。</p><p>二级加锁协议：一级协议基础上，对共享数据读操作进行共享锁定指令，读完数据立刻释放共享锁。避免丢失更新问题，脏读。</p><p>三级加锁协议：一级协议基础之上，对共享数据读操作进行共享锁定指令，直到事务处理结束才释放。避免丢失更新、脏读、不可重复读问题。</p><h4 id="两阶段锁定协议"><a href="#两阶段锁定协议" class="heading-link"><i class="fas fa-link"></i></a><a class="markdownIt-Anchor" href="#两阶段锁定协议"></a> 两阶段锁定协议</h4><p><strong>二阶段锁定协议可以保证可串行化调度</strong></p><p>每个事务必须分两个阶段提出加锁和解锁申请:</p><ul><li>增长阶段，事务只能获得锁，但不能释放锁。</li><li>缩减阶段，事务只能释放锁，但不能获得新锁。</li></ul><h3 id="死锁"><a href="#死锁" class="heading-link"><i class="fas fa-link"></i></a><a class="markdownIt-Anchor" href="#死锁"></a> 死锁</h3><p>事务同时锁定两个及以上资源可能出现彼此不能继续执行的状态</p><img class="lazyload lazyload-gif" src="/images/loading.svg" data-src="https://cdn.davidingplus.cn/images/2025/02/01/image-20230603194449699.png" alt="image-20230603194449699" style="zoom:67%"><h3 id="事务隔离"><a href="#事务隔离" class="heading-link"><i class="fas fa-link"></i></a><a class="markdownIt-Anchor" href="#事务隔离"></a> 事务隔离</h3><img class="lazyload lazyload-gif" src="/images/loading.svg" data-src="https://cdn.davidingplus.cn/images/2025/02/01/image-20230603194501880.png" alt="image-20230603194501880" style="zoom:67%"><h2 id="安全管理"><a href="#安全管理" class="heading-link"><i class="fas fa-link"></i></a><a class="markdownIt-Anchor" href="#安全管理"></a> 安全管理</h2><h3 id="存取安全模型"><a href="#存取安全模型" class="heading-link"><i class="fas fa-link"></i></a><a class="markdownIt-Anchor" href="#存取安全模型"></a> 存取安全模型</h3><p><img class="lazyload lazyload-gif" src="/images/loading.svg" data-src="https://cdn.davidingplus.cn/images/2025/02/01/image-20230603194516267.png" alt="image-20230603194516267"></p><h3 id="系统安全模型"><a href="#系统安全模型" class="heading-link"><i class="fas fa-link"></i></a><a class="markdownIt-Anchor" href="#系统安全模型"></a> 系统安全模型</h3><p><img class="lazyload lazyload-gif" src="/images/loading.svg" data-src="https://cdn.davidingplus.cn/images/2025/02/01/image-20230603194526082.png" alt="image-20230603194526082"></p><p><img class="lazyload lazyload-gif" src="/images/loading.svg" data-src="https://cdn.davidingplus.cn/images/2025/02/01/image-20230603194531339.png" alt="image-20230603194531339"></p><h3 id="用户管理"><a href="#用户管理" class="heading-link"><i class="fas fa-link"></i></a><a class="markdownIt-Anchor" href="#用户管理"></a> 用户管理</h3><p>在DBMS中对每个用户进行管理</p><figure class="highlight sql"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">--创建用户</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">USER</span> &quot;USERA&quot; <span class="keyword">WITH</span></span><br><span class="line"> LOGIN</span><br><span class="line"> INHERIT</span><br><span class="line"> NOSUPERUSER</span><br><span class="line"> NOCREATEDB</span><br><span class="line"> NOCREATEROLE</span><br><span class="line"> NOREPLICATION</span><br><span class="line"> CONNECTION LIMIT <span class="number">-1</span></span><br><span class="line"> PASSWORD <span class="string">&#x27;123456&#x27;</span>;</span><br><span class="line"> </span><br><span class="line"><span class="comment">--修改用户</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">USER</span> &quot;USERA&quot;</span><br><span class="line">  CONNECTION LIMIT <span class="number">10</span></span><br><span class="line">  PASSWORD <span class="string">&#x27;GRES123&#x27;</span>;</span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">USER</span>  <span class="operator">&lt;</span>用户名<span class="operator">&gt;</span>  [ [ <span class="keyword">WITH</span> ] option [ ... ] ];              	<span class="comment">--修改用户的属性</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">USER</span>  <span class="operator">&lt;</span>用户名<span class="operator">&gt;</span>  RENAME <span class="keyword">TO</span> <span class="operator">&lt;</span>新用户名<span class="operator">&gt;</span>;                          <span class="comment">--修改用户的名称</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">USER</span>  <span class="operator">&lt;</span>用户名<span class="operator">&gt;</span>  <span class="keyword">SET</span> <span class="operator">&lt;</span>参数项<span class="operator">&gt;</span> &#123; <span class="keyword">TO</span> <span class="operator">|</span> <span class="operator">=</span> &#125; &#123; <span class="keyword">value</span> <span class="operator">|</span> <span class="keyword">DEFAULT</span> &#125;;  <span class="comment">--修改用户的参数值  </span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">USER</span>  <span class="operator">&lt;</span>用户名<span class="operator">&gt;</span>  RESET <span class="operator">&lt;</span>参数项<span class="operator">&gt;</span>;			                      <span class="comment">--重置用户参数值</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--删除用户</span></span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">USER</span> &quot;USERA&quot;;</span><br></pre></td></tr></table></div></figure><h3 id="权限管理"><a href="#权限管理" class="heading-link"><i class="fas fa-link"></i></a><a class="markdownIt-Anchor" href="#权限管理"></a> 权限管理</h3><p>DBA对用户进行数据库系统/数据库对象访问操作/数据库对象定义操作的授予/收回/拒绝权限</p><figure class="highlight sql"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">GRANT</span>  <span class="keyword">SELECT</span>  <span class="keyword">ON</span>  Department  <span class="keyword">TO</span>  userA;</span><br><span class="line"><span class="keyword">GRANT</span>  <span class="keyword">SELECT</span>  <span class="keyword">ON</span>  Employee    <span class="keyword">TO</span>  userA;</span><br><span class="line"><span class="keyword">GRANT</span>  <span class="keyword">SELECT</span>  <span class="keyword">ON</span>  Project     <span class="keyword">TO</span>  userA;</span><br><span class="line"><span class="keyword">GRANT</span>  <span class="keyword">SELECT</span>  <span class="keyword">ON</span>  Assignment  <span class="keyword">TO</span>  userA;</span><br><span class="line"></span><br><span class="line"><span class="keyword">GRANT</span>  <span class="operator">&lt;</span>权限名<span class="operator">&gt;</span> <span class="keyword">ON</span>  <span class="operator">&lt;</span>对象名<span class="operator">&gt;</span>  <span class="keyword">TO</span> &#123;数据库用户名<span class="operator">|</span>用户角色名&#125;；</span><br><span class="line"><span class="keyword">REVOKE</span>  <span class="operator">&lt;</span>权限名<span class="operator">&gt;</span> <span class="keyword">ON</span>  <span class="operator">&lt;</span>对象名<span class="operator">&gt;</span>  <span class="keyword">FROM</span> &#123;数据库用户名<span class="operator">|</span>用户角色名&#125;；<span class="comment">--撤回权限</span></span><br><span class="line">DENY  <span class="operator">&lt;</span>权限名<span class="operator">&gt;</span> <span class="keyword">ON</span>  <span class="operator">&lt;</span>对象名<span class="operator">&gt;</span> <span class="keyword">TO</span> &#123;数据库用户名<span class="operator">|</span>用户角色名&#125;；<span class="comment">--拒绝权限</span></span><br></pre></td></tr></table></div></figure><h3 id="角色管理"><a href="#角色管理" class="heading-link"><i class="fas fa-link"></i></a><a class="markdownIt-Anchor" href="#角色管理"></a> 角色管理</h3><p>将一组相同权限的用户定义为角色</p><figure class="highlight sql"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span>  ROLE  <span class="operator">&lt;</span>角色名<span class="operator">&gt;</span> [ [ <span class="keyword">WITH</span> ] option [ ... ] ]; 	               <span class="comment">--创建角色</span></span><br><span class="line"><span class="keyword">ALTER</span>  ROLE  <span class="operator">&lt;</span>角色名<span class="operator">&gt;</span>  [ [ <span class="keyword">WITH</span> ] option [ ... ] ]; 	               <span class="comment">--修改角色属性</span></span><br><span class="line"><span class="keyword">ALTER</span>  ROLE  <span class="operator">&lt;</span>角色名<span class="operator">&gt;</span>  RENAME <span class="keyword">TO</span> <span class="operator">&lt;</span>新角色名<span class="operator">&gt;</span>; 		                    <span class="comment">--修改角色名称 </span></span><br><span class="line"><span class="keyword">ALTER</span>  ROLE  <span class="operator">&lt;</span>角色名<span class="operator">&gt;</span>  <span class="keyword">SET</span> <span class="operator">&lt;</span>参数项<span class="operator">&gt;</span> &#123; <span class="keyword">TO</span> <span class="operator">|</span> <span class="operator">=</span> &#125; &#123; <span class="keyword">value</span> <span class="operator">|</span> <span class="keyword">DEFAULT</span> &#125;;	 <span class="comment">--修改角色参数值</span></span><br><span class="line"><span class="keyword">ALTER</span>  ROLE  <span class="operator">&lt;</span>角色名<span class="operator">&gt;</span>  RESET <span class="operator">&lt;</span>参数项<span class="operator">&gt;</span>;	                    		 <span class="comment">--复位角色参数值</span></span><br><span class="line"><span class="keyword">DROP</span>  ROLE  <span class="operator">&lt;</span>角色名<span class="operator">&gt;</span>;					                           	   <span class="comment">--删除指定角色</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">CREATE</span>  ROLE  &quot;Role_Manager&quot;  <span class="keyword">WITH</span></span><br><span class="line"> LOGIN</span><br><span class="line"> NOSUPERUSER</span><br><span class="line"> NOCREATEDB</span><br><span class="line"> NOCREATEROLE</span><br><span class="line"> INHERIT</span><br><span class="line"> NOREPLICATION</span><br><span class="line"> CONNECTION LIMIT <span class="number">-1</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">GRANT</span>  <span class="keyword">SELECT</span>,<span class="keyword">INSERT</span>,<span class="keyword">UPDATE</span>,<span class="keyword">DELETE</span>  <span class="keyword">ON</span>  Department  <span class="keyword">TO</span>  &quot;Role_Manager&quot;;</span><br><span class="line"><span class="keyword">GRANT</span>  <span class="keyword">SELECT</span>,<span class="keyword">INSERT</span>,<span class="keyword">UPDATE</span>,<span class="keyword">DELETE</span>  <span class="keyword">ON</span>  Employee  <span class="keyword">TO</span>  &quot;Role_Manager&quot;;</span><br><span class="line"><span class="keyword">GRANT</span>  <span class="keyword">SELECT</span>,<span class="keyword">INSERT</span>,<span class="keyword">UPDATE</span>,<span class="keyword">DELETE</span>  <span class="keyword">ON</span>  Project  <span class="keyword">TO</span>  &quot;Role_Manager&quot;;</span><br><span class="line"><span class="keyword">GRANT</span>  <span class="keyword">SELECT</span>,<span class="keyword">INSERT</span>,<span class="keyword">UPDATE</span>,<span class="keyword">DELETE</span>  <span class="keyword">ON</span>  Assignment  <span class="keyword">TO</span>  &quot;Role_Manager&quot;;</span><br></pre></td></tr></table></div></figure><p>为用户赋予角色</p><figure class="highlight sql"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">USER</span>  &quot;StudentUser&quot;  <span class="keyword">WITH</span></span><br><span class="line">  LOGIN</span><br><span class="line">  CONNECTION LIMIT <span class="number">-1</span></span><br><span class="line">  <span class="keyword">IN</span> ROLE &quot;R_Student&quot;</span><br><span class="line">  PASSWORD <span class="string">&#x27;123456&#x27;</span>;</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">USER</span>  &quot;TeacherUser&quot;  <span class="keyword">WITH</span></span><br><span class="line">  LOGIN</span><br><span class="line">  CONNECTION LIMIT <span class="number">-1</span></span><br><span class="line">  <span class="keyword">IN</span> ROLE &quot;R_Teacher&quot;</span><br><span class="line">  PASSWORD <span class="string">&#x27;123456&#x27;</span>;</span><br></pre></td></tr></table></div></figure><h2 id="数据库备份与恢复"><a href="#数据库备份与恢复" class="heading-link"><i class="fas fa-link"></i></a><a class="markdownIt-Anchor" href="#数据库备份与恢复"></a> 数据库备份与恢复</h2><p>数据库备份：对数据和状态（日志）进行副本复制</p><p>数据库恢复：从备份副本将数据库从错误状态恢复到某一正确状态</p><p>备份SAMPLE数据库到一个G磁盘的根目录文件Sample.bak中。</p><figure class="highlight sql"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">BACKUP DATABASE SAMPLE   </span><br><span class="line"><span class="keyword">TO</span> DISK <span class="operator">=</span> ‘G:\Sample.bak<span class="string">&#x27;; </span></span><br></pre></td></tr></table></div></figure><p>从存储备份文件中恢复SAMPLE数据库。</p><figure class="highlight sql"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">RESTORE DATABASE SAMPLE</span><br><span class="line"><span class="keyword">FROM</span> DISK <span class="operator">=</span> ‘G:\Sample.bak<span class="string">&#x27;; </span></span><br></pre></td></tr></table></div></figure><p>也可利用事务日志前滚或回滚方式进行数据库恢复</p><h1 id="数据库应用编程"><a href="#数据库应用编程" class="heading-link"><i class="fas fa-link"></i></a><a class="markdownIt-Anchor" href="#数据库应用编程"></a> 数据库应用编程</h1><h2 id="数据库连接技术odbc"><a href="#数据库连接技术odbc" class="heading-link"><i class="fas fa-link"></i></a><a class="markdownIt-Anchor" href="#数据库连接技术odbc"></a> 数据库连接技术ODBC</h2><h3 id="概念"><a href="#概念" class="heading-link"><i class="fas fa-link"></i></a><a class="markdownIt-Anchor" href="#概念"></a> 概念</h3><p>传统应用开发通常选用特定DBMS管理系统，Microsoft推出开放式数据库互连（Open DataBase Connectivity，简写为ODBC）技术。ODBC定义了一套基于SQL的、公共的、与数据库无关的API，实现了应用程序对多种不同DBMS的数据库的访问，实现了数据库连接方式的变革。 ODBC使应用程序利用相同源码就可以访问不同数据库系统。</p><h3 id="odbc层次结构"><a href="#odbc层次结构" class="heading-link"><i class="fas fa-link"></i></a><a class="markdownIt-Anchor" href="#odbc层次结构"></a> ODBC层次结构</h3><p><img class="lazyload lazyload-gif" src="/images/loading.svg" data-src="https://cdn.davidingplus.cn/images/2025/02/01/image-20230603194547936.png" alt="image-20230603194547936"></p><h3 id="odbc使用步骤"><a href="#odbc使用步骤" class="heading-link"><i class="fas fa-link"></i></a><a class="markdownIt-Anchor" href="#odbc使用步骤"></a> ODBC使用步骤</h3><ol><li>使用ODBC管理器注册一个数据源</li><li>管理器根据数据源提供的信息（数据库位置类型及ODBC驱动程序）建立ODBC与具体数据库的联系</li><li>应用程序将数据源名提供给ODBC，让ODBC建立起连接</li><li>应用程序通过驱动程序管理器与数据库交换信息</li><li>驱动程序管理器负责将应用程序对ODBC API的调用传递给正确的驱动程序</li><li>驱动程序执行玩相应的sql操作后，通过驱动程序管理器将结果返回给应用程序</li></ol><h2 id="数据库连接技术jdbc"><a href="#数据库连接技术jdbc" class="heading-link"><i class="fas fa-link"></i></a><a class="markdownIt-Anchor" href="#数据库连接技术jdbc"></a> 数据库连接技术（JDBC）</h2><h3 id="概念-2"><a href="#概念-2" class="heading-link"><i class="fas fa-link"></i></a><a class="markdownIt-Anchor" href="#概念-2"></a> 概念</h3><p><strong>JDBC</strong>（Java DataBase Connectivity，Java数据库连接）技术的简称 ，是一种用于执行SQL语句的Java API。它由一组用Java编程语言编写的类和接口组成。这个API由<strong>java.sql.*包中</strong>的一些类和接口组成，它为数据库开发人员提供了一个标准的API，使他们能够用纯Java API 来编写数据库应用程序。使用JDBC访问数据库需要相应数据库的JDBC驱动程序</p><figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 加载驱动</span></span><br><span class="line">Class.forName(<span class="string">&quot;org.postgresql.Driver&quot;</span>);</span><br><span class="line"><span class="comment">// 建立连接</span></span><br><span class="line"><span class="type">String</span> <span class="variable">UrL</span> <span class="operator">=</span> <span class="string">&quot;jdbc:postgresql://localhost:5432/testdb&quot;</span>;</span><br><span class="line"><span class="type">String</span> <span class="variable">username</span> <span class="operator">=</span> <span class="string">&quot;myuser&quot;</span>;</span><br><span class="line"><span class="type">String</span> <span class="variable">password</span> <span class="operator">=</span> <span class="string">&quot;sa&quot;</span>;</span><br><span class="line"><span class="type">Connection</span> <span class="variable">conn</span> <span class="operator">=</span> DriverManager.getConnection(URL,username,password);</span><br><span class="line"><span class="comment">// 创建Statement对象</span></span><br><span class="line"><span class="type">Statement</span> <span class="variable">stmt</span> <span class="operator">=</span> conn.createStatement();</span><br><span class="line"><span class="comment">// 执行sql语句</span></span><br><span class="line"><span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;INSERT INTO public.student (sid, sname, gender, birthday, major, phone)&quot;</span> + <span class="string">&quot; VALUES (&#x27;2017001&#x27;, &#x27;张山&#x27;, &#x27;男&#x27;, &#x27;1998-10-10&#x27;,&#x27;软件工程&#x27;,&#x27;13602810001&#x27;)&quot;</span>;</span><br><span class="line">stmt.executeUpdate(sql);</span><br></pre></td></tr></table></div></figure><p>创建了Statement对象 ,就可以向Statement对象发送SQL语句。主要掌握两种执行SQL语句的方法：executeQuery()、executeUpdate()</p><ol><li>executeQuery()：返回语句执行后的单个结果集的，所以通常用于select语句</li><li>executeUpdate()返回值是一个整数，指示受影响的行数（可以用于update、insert、delete语句）</li></ol><figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 保存结果集</span></span><br><span class="line"><span class="type">Statement</span> <span class="variable">stmt</span> <span class="operator">=</span> conn.createStatement();</span><br><span class="line"><span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;SELECT id, name, age FROM company&quot;</span>;</span><br><span class="line"><span class="type">ResultSet</span> <span class="variable">rs</span> <span class="operator">=</span> stmt.executeQuery(sql);</span><br><span class="line"><span class="keyword">while</span>(rs.next())&#123;</span><br><span class="line">    System.out.println(rs.getString(<span class="string">&quot;name&quot;</span>));</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 关闭连接</span></span><br><span class="line">rs.close();</span><br><span class="line">stmt.close();</span><br><span class="line">conn.close();</span><br></pre></td></tr></table></div></figure><h2 id="数据库存储过程"><a href="#数据库存储过程" class="heading-link"><i class="fas fa-link"></i></a><a class="markdownIt-Anchor" href="#数据库存储过程"></a> 数据库存储过程</h2><p>存储过程，一种数据库对象，由一组能完成特定功能的SQL语句集构成，编译后存储在数据库服务端接受调用。能够减少网络通信量加快执行速度，不过开发调试复杂可移植性差。</p><figure class="highlight sql"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> [ <span class="keyword">OR</span> REPLACE ] <span class="keyword">FUNCTION</span><span class="operator">/</span><span class="keyword">PROCEDURE</span>  name</span><br><span class="line">    ( [ [ argmode ] [ argname ] argtype [ &#123; <span class="keyword">DEFAULT</span> <span class="operator">|</span> <span class="operator">=</span> &#125; default_expr ] [, ...] ] )</span><br><span class="line">    [ <span class="keyword">RETURNS</span> retype <span class="operator">|</span> <span class="keyword">RETURNS</span> <span class="keyword">TABLE</span> ( column_name  column_type [, ...] ) ]</span><br><span class="line"><span class="keyword">AS</span> $$         <span class="operator">/</span><span class="operator">/</span>$$用于声明存储过程的实际代码的开始</span><br><span class="line"><span class="keyword">DECLARE</span></span><br><span class="line">        <span class="comment">-- 声明段</span></span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line">        <span class="comment">--函数体语句</span></span><br><span class="line"><span class="keyword">END</span>;</span><br><span class="line">$$ <span class="keyword">LANGUAGE</span> lang_name;  <span class="operator">/</span><span class="operator">/</span>$$ 表明代码的结束, <span class="keyword">LANGUAGE</span>后面指明所用的编程语言</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 创建一个名为countRecords()的存储过程统计STUDENT表的记录数。</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">OR</span> REPLACE <span class="keyword">FUNCTION</span> countRecords ()  </span><br><span class="line"><span class="keyword">RETURNS</span> <span class="type">integer</span> <span class="keyword">AS</span> $count$  </span><br><span class="line"><span class="keyword">declare</span>  </span><br><span class="line">    count <span class="type">integer</span>;  </span><br><span class="line"><span class="keyword">BEGIN</span>  </span><br><span class="line">   <span class="keyword">SELECT</span> <span class="built_in">count</span>(<span class="operator">*</span>) <span class="keyword">into</span> count <span class="keyword">FROM</span> STUDENT;  </span><br><span class="line">   <span class="keyword">RETURN</span> count;  </span><br><span class="line"><span class="keyword">END</span>;  </span><br><span class="line">$count$ <span class="keyword">LANGUAGE</span> plpgsql;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 执行存储过程</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> countRecords();</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 存储过程调用其他存储过程:select  into 自定义变量  from 存储过程名（参数）；</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">OR</span> REPLACE <span class="keyword">FUNCTION</span> testExec()  </span><br><span class="line"><span class="keyword">returns</span> <span class="type">integer</span> <span class="keyword">AS</span> $$ </span><br><span class="line"><span class="keyword">declare</span></span><br><span class="line">   rec <span class="type">integer</span>;  </span><br><span class="line"><span class="keyword">BEGIN</span>  </span><br><span class="line">   <span class="keyword">select</span>  <span class="keyword">into</span> rec countRecords();  </span><br><span class="line">     <span class="operator">/</span><span class="operator">/</span>如果不关心countRecords()的返回值，则可用 PERFORM countRecords() 代替; </span><br><span class="line">   <span class="keyword">return</span>  rec;  </span><br><span class="line"><span class="keyword">END</span>;  </span><br><span class="line">$$ <span class="keyword">LANGUAGE</span> plpgsql;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 删除存储过程</span></span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">FUNCTION</span> [ IF <span class="keyword">EXISTS</span> ] name ( [ [ argmode ] [ argname ] argtype [, ...] ] ) [ CASCADE <span class="operator">|</span> RESTRICT ]</span><br><span class="line"></span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">FUNCTION</span> IF <span class="keyword">EXISTS</span> testExec();</span><br><span class="line"></span><br></pre></td></tr></table></div></figure><h2 id="数据库触发器"><a href="#数据库触发器" class="heading-link"><i class="fas fa-link"></i></a><a class="markdownIt-Anchor" href="#数据库触发器"></a> 数据库触发器</h2><p>触发器是一个定义在表或视图上的特殊类型的存储过程（不传递接受参数）、一个特殊的事务单位，由操作事件触发自动执行，可以实现比约束更复杂的数据完整性，用于加强数据完整性约束和业务规则</p><p>语句级触发器只执行一次（默认触发器）；行级触发器每有数据变化一行就执行一次</p><p>INSTEAD OF触发器：事件发生时只执行触发器不执行原本的sql语句，一个表或视图只能有一个INSTEAD OF触发器</p><h3 id="触发器相关特殊变量"><a href="#触发器相关特殊变量" class="heading-link"><i class="fas fa-link"></i></a><a class="markdownIt-Anchor" href="#触发器相关特殊变量"></a> 触发器相关特殊变量</h3><p>NEW：RECORD类型，对于行级触发器其存有INSERT或UPDATE操作产生的新数据行。对于语句级触发器其值为NULL</p><p>OLD：RECORD类型，对于行级触发器其存有DELETE或UPDATE操作修改或删除的旧数据行。对于语句级触发器其值为NULL</p><p>TG_OP:text类型，值为INSERT/UPDATE/DELETE，说明引发触发器的操作</p><p>创建触发器步骤：</p><ol><li>检查所依附的表或视图是否存在</li><li>创建触发器执行的触发器函数，返回类型为TRIGGER</li><li>创建触发器</li></ol><figure class="highlight sql"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span>  <span class="keyword">TRIGGER</span>  触发器名   </span><br><span class="line">    &#123; BEFORE <span class="operator">|</span> AFTER <span class="operator">|</span> INSTEAD <span class="keyword">OF</span> &#125;</span><br><span class="line">     <span class="keyword">ON</span> 表名</span><br><span class="line">     [ <span class="keyword">FOR</span> [ <span class="keyword">EACH</span> ] &#123; <span class="type">ROW</span> <span class="operator">|</span> STATEMENT &#125; ]</span><br><span class="line">     <span class="keyword">EXECUTE</span> <span class="keyword">PROCEDURE</span> 存储过程名 ( 参数列表 )</span><br></pre></td></tr></table></div></figure><p>实例 为了防止非法修改stu_score表的课程成绩，创建audit_score表记录stu_score表的成绩变化</p><figure class="highlight sql"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 创建表</span></span><br><span class="line"><span class="keyword">CREATE TABLE</span> stu_score</span><br><span class="line">( </span><br><span class="line">    sid <span class="type">character</span>(<span class="number">10</span>) <span class="keyword">NOT NULL</span>,</span><br><span class="line">    cid <span class="type">character</span>(<span class="number">10</span>) <span class="keyword">NOT NULL</span>,</span><br><span class="line">    score <span class="type">numeric</span>(<span class="number">5</span>,<span class="number">1</span>),</span><br><span class="line">    <span class="keyword">CONSTRAINT</span> stu_score_pkey <span class="keyword">PRIMARY KEY</span> (sid, cid)</span><br><span class="line">)</span><br><span class="line"><span class="keyword">CREATE TABLE</span> audit_score</span><br><span class="line">(    username <span class="type">character</span>(<span class="number">20</span>) ,  <span class="comment">--用户名</span></span><br><span class="line">    sid <span class="type">character</span>(<span class="number">10</span>) ,</span><br><span class="line">    cid <span class="type">character</span>(<span class="number">10</span>) ,</span><br><span class="line">    updatetime text ,            <span class="comment">--修改的时间</span></span><br><span class="line">    oldscore <span class="type">numeric</span>(<span class="number">5</span>,<span class="number">1</span>),   <span class="comment">--修改前的成绩</span></span><br><span class="line">    newscore <span class="type">numeric</span>(<span class="number">5</span>,<span class="number">1</span>)  <span class="comment">--修改后的成绩</span></span><br><span class="line">)</span><br><span class="line"><span class="comment">-- 创建函数</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">OR</span> REPLACE <span class="keyword">FUNCTION</span> score_audit() <span class="keyword">RETURNS</span> <span class="keyword">TRIGGER</span> </span><br><span class="line"><span class="keyword">AS</span> $score_sudits$</span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line">	IF (TG_OP <span class="operator">=</span> <span class="string">&#x27;DELETE&#x27;</span>) <span class="keyword">THEN</span></span><br><span class="line">		<span class="keyword">INSERT INTO</span> audit_score <span class="keyword">SELECT</span> <span class="keyword">user</span>,old.sid,old.cid,OLD.score ;</span><br><span class="line">		<span class="keyword">RETURN</span> <span class="keyword">OLD</span>;</span><br><span class="line">	ELSIF (TG_OP <span class="operator">=</span> <span class="string">&#x27;UPDATE&#x27;</span>) <span class="keyword">THEN</span></span><br><span class="line">		<span class="keyword">INSERT INTO</span> audit_score</span><br><span class="line">		<span class="keyword">SELECT</span> <span class="keyword">user</span>,old.sid,old.cid,now(),OLD.score,new.score</span><br><span class="line">		<span class="keyword">WHERE</span> old.sid<span class="operator">=</span>new.sid <span class="keyword">and</span> old.cid<span class="operator">=</span>new.cid;</span><br><span class="line">		<span class="keyword">RETURN</span> <span class="keyword">NEW</span></span><br><span class="line">	ELSIF (TG_OP <span class="operator">=</span> <span class="string">&#x27;INSERT&#x27;</span>) <span class="keyword">THEN</span></span><br><span class="line">		<span class="keyword">INSERT INTO</span> audit_score <span class="keyword">SELECT</span> <span class="keyword">user</span>,new.sid,new.cid,now(),<span class="keyword">null</span>,new.score;</span><br><span class="line">		<span class="keyword">RETURN</span> <span class="keyword">NEW</span>;</span><br><span class="line">	<span class="keyword">END</span> IF;</span><br><span class="line">	<span class="keyword">RETURN</span> <span class="keyword">NULL</span>;</span><br><span class="line"><span class="keyword">END</span>;</span><br><span class="line">$score_audits$ <span class="keyword">LANGUAGE</span> plpgsql;</span><br><span class="line"><span class="comment">-- 创建触发器</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TRIGGER</span> score_audit_triger</span><br><span class="line">AFTER <span class="keyword">INSERT</span> <span class="keyword">OR</span> <span class="keyword">UPDATE</span> <span class="keyword">OR</span> <span class="keyword">DELETE</span> <span class="keyword">ON</span> stu_score</span><br><span class="line"><span class="keyword">FOR</span> <span class="keyword">EACH</span> <span class="type">ROW</span> <span class="keyword">EXECUTE</span> <span class="keyword">PROCEDURE</span> score_audit();</span><br><span class="line"><span class="comment">-- 修改触发器</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TRIGGER</span> score_audit_trigger <span class="keyword">ON</span> stu_score  RENAME <span class="keyword">TO</span> score_audit_trig;</span><br><span class="line"><span class="comment">-- 删除触发器</span></span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">TRIGGER</span> [ IF <span class="keyword">EXISTS</span> ] name <span class="keyword">ON</span> table_name [ CASCADE <span class="operator">|</span> RESTRICT ]</span><br><span class="line"></span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">TRIGGER</span> IF <span class="keyword">EXISTS</span> score_audit_trig <span class="keyword">ON</span> stu_score CASCADE;</span><br></pre></td></tr></table></div></figure><h2 id="数据库游标"><a href="#数据库游标" class="heading-link"><i class="fas fa-link"></i></a><a class="markdownIt-Anchor" href="#数据库游标"></a> 数据库游标</h2><p>游标是一种存放了查询数据库表返回的数据记录的临时的数据库对象，包含查询结果和指针，提供了处理结果集中每一条记录的机制，它总是与一条查询SQL语句相关联</p><p>声明游标</p><p><img class="lazyload lazyload-gif" src="/images/loading.svg" data-src="https://cdn.davidingplus.cn/images/2025/02/01/image-20230603194659342.png" alt="image-20230603194659342"></p><figure class="highlight sql"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 声明游标</span></span><br><span class="line">curStudent <span class="keyword">CURSOR</span> <span class="keyword">FOR</span> <span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> student;</span><br><span class="line">curStudentOne <span class="keyword">CURSOR</span> (key <span class="type">integer</span>)<span class="number">7</span>y <span class="keyword">IS</span> <span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> student <span class="keyword">WHERE</span> SID <span class="operator">=</span> key;</span><br><span class="line"></span><br></pre></td></tr></table></div></figure><p>打开游标</p><p><img class="lazyload lazyload-gif" src="/images/loading.svg" data-src="https://cdn.davidingplus.cn/images/2025/02/01/image-20230603194708438.png" alt="image-20230603194708438"></p><p>使用游标</p><p><img class="lazyload lazyload-gif" src="/images/loading.svg" data-src="https://cdn.davidingplus.cn/images/2025/02/01/image-20230603194714433.png" alt="image-20230603194714433"></p><p>关闭游标</p><p><img class="lazyload lazyload-gif" src="/images/loading.svg" data-src="https://cdn.davidingplus.cn/images/2025/02/01/image-20230603194737413.png" alt="image-20230603194737413"></p><h2 id="嵌入式sql编程"><a href="#嵌入式sql编程" class="heading-link"><i class="fas fa-link"></i></a><a class="markdownIt-Anchor" href="#嵌入式sql编程"></a> 嵌入式sql编程</h2><p>sql与宿主语言，混合编程</p><h1 id="nosql数据库技术"><a href="#nosql数据库技术" class="heading-link"><i class="fas fa-link"></i></a><a class="markdownIt-Anchor" href="#nosql数据库技术"></a> NoSQL数据库技术</h1><h2 id="大数据5v特征大量高速性多样性真实性价值性"><a href="#大数据5v特征大量高速性多样性真实性价值性" class="heading-link"><i class="fas fa-link"></i></a><a class="markdownIt-Anchor" href="#大数据5v特征大量高速性多样性真实性价值性"></a> 大数据5V特征：大量，高速性，多样性，真实性，价值性</h2><ul><li>超量Volume</li><li>高速Velocity</li><li>异构Variety</li><li>真实Veracity</li><li>价值Value</li></ul><h2 id="cap理论"><a href="#cap理论" class="heading-link"><i class="fas fa-link"></i></a><a class="markdownIt-Anchor" href="#cap理论"></a> CAP理论</h2><p>在分布式的环境下设计和部署系统时，有3个核心的需求：<strong>CAP对应一致性（Consistency），可用性（Availability）和分区容忍性（Partition Tolerance）</strong></p><p>CAP理论的核心：</p><p><strong>一个分布式系统不可能同时很好的满足一致性、可用性和分区容错性这三个需求，最多只能同时较好的满足两个。</strong></p><ul><li>CA - 单点集群，满足一致性，可用性的系统，</li><li>CP - 满足一致性，分区容忍性的系统，</li><li>AP - 满足可用性，分区容忍性的系统，</li></ul><p>CAP目的：</p><ul><li>CAP是为了探索不同应用的一致性C与可用性A之间的平衡，</li><li>在网络或其他原因，通过牺牲一定的一致性C来获得更好的性能与扩展性</li><li>在有分隔发生，选择可用性A，集中关注分隔的恢复，需要分隔前、中、后期的处理策略， 及合适的补偿处理机制。</li><li>选择什么样的方式： 放弃Ｐ？放弃Ａ？放弃Ｃ？BASE</li></ul><h2 id="base"><a href="#base" class="heading-link"><i class="fas fa-link"></i></a><a class="markdownIt-Anchor" href="#base"></a> BASE</h2><ul><li><strong>Basically Available --基本可用</strong>；系统能够基本运行，一直提供服务。</li><li><strong>Soft-state --软状态/柔性事务</strong>。“Soft state” 可以理解为&quot;无连接&quot;的, 而 “Hard state” 是&quot;面向连接&quot;的；系统不要求一直保持强一致状态。</li><li><strong>Eventual Consistency --最终一致性</strong> 系统在某个时刻达到最终一致性。</li><li>BASE定义为CAP中AP的衍生，在分布式环境下， BASE是数据的属性，BASE强调基本的可用性，按照功能划分数据库</li></ul><p>base特点</p><ul><li><strong>ACID是事物的特征</strong>， A（原子性）C（一致性）I（隔离性）D（持久性），ACID的特点是强一致性、隔离性、采用悲观保守方法、难以变化；</li><li>BASE的特点是弱一致性、可用性优先、采用乐观方法、适应变化并且简单快捷。</li><li>对数据不断增长的系统， 大数据环境下系统的可用性及分隔容忍性的要求要高于强一致性，很难满足事务要求的ACID特性。</li></ul><h2 id="最终一致性"><a href="#最终一致性" class="heading-link"><i class="fas fa-link"></i></a><a class="markdownIt-Anchor" href="#最终一致性"></a> 最终一致性</h2><ul><li>强一致性：要求无论更新操作实在哪一个副本执行，之后所有的读操作都要能获得最新的数据。</li><li>弱一致性：用户读到某一操作对系统特定数据的更新需要一段时间，称这段时间为“不一致性窗口”。</li><li>最终一致性： 弱一致性的一种特例，保证用户最终能够读取到某操作对系统特定数据的更新。</li></ul><h2 id="存储模型"><a href="#存储模型" class="heading-link"><i class="fas fa-link"></i></a><a class="markdownIt-Anchor" href="#存储模型"></a> 存储模型</h2><ul><li>列存储数据库，将同一列的数据存储在一起，可以存储结构化和半结构化数据</li><li>键值存储数据库，存储的数据是有键（key）和值（value）两部分组成，通过key快速查询到其value，value的格式可以根据具体应用来确定</li><li>文档存储数据库，存储的内容是文档型的，可以用格式化文件（类似json、XML等）的格式存储</li><li>图存储数据库，数据以有向加权图方式进行存储</li></ul><div class="table-container"><table><thead><tr><th style="text-align:center"><strong>分类</strong></th><th style="text-align:center"><strong>Examples</strong>举例</th><th style="text-align:center"><strong>典型应用场景</strong></th><th style="text-align:center"><strong>数据模型</strong></th><th style="text-align:center"><strong>优点</strong></th><th style="text-align:center"><strong>缺点</strong></th></tr></thead><tbody><tr><td style="text-align:center">键值 （key-value）</td><td style="text-align:center">Tokyo Cabinet/Tyrant, Redis, Voldemort, Oracle DB</td><td style="text-align:center">内容缓存，主要用于处理大量数据的高访问负载，也用于一些日志系统等等</td><td style="text-align:center">Key 指向 Value 的键值对，通常用hash table来实现</td><td style="text-align:center">查找速度快</td><td style="text-align:center">数据无结构化，通常只被当作字符串或者二进制数据</td></tr><tr><td style="text-align:center">列存储数据库</td><td style="text-align:center">Cassandra, HBase, Riak</td><td style="text-align:center">分布式的文件系统</td><td style="text-align:center">以列簇式存储，将同一列数据存在一起</td><td style="text-align:center">查找速度快，可扩展性强，更容易进行分布式扩展</td><td style="text-align:center">功能相对局限</td></tr><tr><td style="text-align:center">文档型数据库</td><td style="text-align:center">CouchDB, MongoDb</td><td style="text-align:center">与Key-Value类似，Value是结构化的，不同的是数据库能够了解Value的内容</td><td style="text-align:center">Key-Value对应的键值对，Value为结构化数据</td><td style="text-align:center">数据结构要求不严格，表结构可变，不需要像关系型数据库一样需要预先定义表结构</td><td style="text-align:center">查询性能不高，而且缺乏统一的查询语法。</td></tr><tr><td style="text-align:center">图形(Graph)数据库</td><td style="text-align:center">Neo4J, InfoGrid, Infinite Graph</td><td style="text-align:center">社交网络，推荐系统等。专注于构建关系图谱</td><td style="text-align:center">图结构</td><td style="text-align:center">利用图结构相关算法。比如最短路径寻址，N度关系查找等</td><td style="text-align:center">很多时候需要对整个图做计算才能得出需要的信息，而且这种结构不太好做分布式的集群方案</td></tr></tbody></table></div></div><footer class="post-footer"><div class="post-ending ending"><div class="ending__text">------ 本文结束，感谢您的阅读 ------</div></div><div class="post-copyright copyright"><div class="copyright-author"><span class="copyright-author__name">本文作者: </span><span class="copyright-author__value"><a href="https://blog.davidingplus.cn">DavidingPlus</a></span></div><div class="copyright-link"><span class="copyright-link__name">本文链接: </span><span class="copyright-link__value"><a href="https://blog.davidingplus.cn/posts/27483ebb.html">https://blog.davidingplus.cn/posts/27483ebb.html</a></span></div><div class="copyright-notice"><span class="copyright-notice__name">版权声明: </span><span class="copyright-notice__value">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.en" rel="external nofollow" target="_blank">BY-NC-SA</a> 许可协议。转载请注明出处！</span></div></div><div class="post-reward reward"><div class="reward-button">大爷，赏个铜板呗~~~</div><div class="reward-qrcode"><span class="reward-qrcode-alipay"><img class="reward-qrcode-alipay__img" src="/images/reward/alipay.webp"><div class="reward-qrcode-alipay__text">支付宝</div></span><span class="reward-qrcode-wechat"><img class="reward-qrcode-wechat__img" src="/images/reward/wechat-pay.webp"><div class="reward-qrcode-wechat__text">微信</div></span></div></div><nav class="post-paginator paginator"><div class="paginator-prev"><a class="paginator-prev__link" href="/posts/fe75e45c.html"><span class="paginator-prev__icon"><i class="fas fa-angle-left"></i></span><span class="paginator-prev__text">计算机网络 期末复习</span></a></div><div class="paginator-next"><a class="paginator-next__link" href="/posts/a73bc3b6.html"><span class="paginator-prev__text">本科 实验室工作记录</span><span class="paginator-next__icon"><i class="fas fa-angle-right"></i></span></a></div></nav></footer></div></div><div class="comments" id="comments"><div id="utterances-container"></div></div></div><div class="sidebar-wrap" id="sidebar-wrap"><aside class="sidebar" id="sidebar"><div class="sidebar-nav"><span class="sidebar-nav-toc current">文章目录</span><span class="sidebar-nav-ov">站点概览</span></div><section class="sidebar-toc"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%89%8D%E8%A8%80"><span class="toc-number">1.</span> <span class="toc-text">前言</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E5%BA%93%E5%8F%8A%E5%85%B6%E7%B3%BB%E7%BB%9F%E6%A6%82%E5%BF%B5"><span class="toc-number">2.</span> <span class="toc-text">数据库及其系统概念</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%85%B3%E7%B3%BB%E6%A8%A1%E5%9E%8B"><span class="toc-number">3.</span> <span class="toc-text">关系模型</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%B3%E7%B3%BB%E7%9B%B8%E5%85%B3%E6%A6%82%E5%BF%B5"><span class="toc-number">3.1.</span> <span class="toc-text">关系相关概念</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%B3%E7%B3%BB%E6%A8%A1%E5%9E%8B%E5%8E%9F%E7%90%86"><span class="toc-number">3.2.</span> <span class="toc-text">关系模型原理</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#sql%E8%AF%AD%E5%8F%A5"><span class="toc-number">4.</span> <span class="toc-text">SQL语句</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#sql%E6%A6%82%E8%BF%B0"><span class="toc-number">4.1.</span> <span class="toc-text">sql概述</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E5%AE%9A%E4%B9%89%E8%AF%AD%E5%8F%A5"><span class="toc-number">4.2.</span> <span class="toc-text">数据定义语句</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="toc-number">4.2.1.</span> <span class="toc-text">数据库</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E5%BA%93%E8%A1%A8"><span class="toc-number">4.2.2.</span> <span class="toc-text">数据库表</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B4%A2%E5%BC%95"><span class="toc-number">4.2.3.</span> <span class="toc-text">数据库索引</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E6%93%8D%E7%BA%B5%E8%AF%AD%E5%8F%A5"><span class="toc-number">4.3.</span> <span class="toc-text">数据操纵语句</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E6%8F%92%E5%85%A5"><span class="toc-number">4.3.1.</span> <span class="toc-text">数据插入</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E4%BF%AE%E6%94%B9"><span class="toc-number">4.3.2.</span> <span class="toc-text">数据修改</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E5%88%A0%E9%99%A4"><span class="toc-number">4.3.3.</span> <span class="toc-text">数据删除</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E6%9F%A5%E8%AF%A2%E8%AF%AD%E5%8F%A5"><span class="toc-number">4.4.</span> <span class="toc-text">数据查询语句</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8D%95%E8%A1%A8%E6%9F%A5%E8%AF%A2"><span class="toc-number">4.4.1.</span> <span class="toc-text">单表查询</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A4%9A%E8%A1%A8%E5%85%B3%E8%81%94%E6%9F%A5%E8%AF%A2"><span class="toc-number">4.4.2.</span> <span class="toc-text">多表关联查询</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E5%BA%93%E8%AE%BE%E8%AE%A1"><span class="toc-number">5.</span> <span class="toc-text">数据库设计</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%A6%82%E8%BF%B0"><span class="toc-number">5.1.</span> <span class="toc-text">概述</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E5%BA%93%E5%BC%80%E5%8F%91%E8%BF%87%E7%A8%8B"><span class="toc-number">5.1.1.</span> <span class="toc-text">数据库开发过程</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E5%BA%93%E7%BB%93%E6%9E%84%E6%A8%A1%E5%9E%8B%E8%AE%BE%E8%AE%A1-%E6%95%B0%E6%8D%AE%E5%BA%93%E7%BB%93%E6%9E%84%E6%A8%A1%E5%9E%8B"><span class="toc-number">5.1.2.</span> <span class="toc-text">数据库结构模型设计-数据库结构模型</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#e-r%E6%A8%A1%E5%9E%8B%E6%96%B9%E6%B3%95"><span class="toc-number">5.2.</span> <span class="toc-text">E-R模型方法</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A6%82%E5%BF%B5%E6%95%B0%E6%8D%AE%E6%A8%A1%E5%9E%8B"><span class="toc-number">5.2.1.</span> <span class="toc-text">概念数据模型</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#cdmldmpdm%E6%A8%A1%E5%9E%8B%E8%BD%AC%E6%8D%A2%E8%AE%BE%E8%AE%A1"><span class="toc-number">5.2.2.</span> <span class="toc-text">CDM&#x2F;LDM&#x2F;PDM模型转换设计</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E5%BA%93%E8%A7%84%E8%8C%83%E5%8C%96%E8%AE%BE%E8%AE%A1"><span class="toc-number">5.3.</span> <span class="toc-text">数据库规范化设计</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%87%BD%E6%95%B0%E4%BE%9D%E8%B5%96%E7%90%86%E8%AE%BA"><span class="toc-number">5.3.1.</span> <span class="toc-text">函数依赖理论</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%B3%E7%B3%BB%E8%A7%84%E8%8C%83%E5%8C%96%E8%8C%83%E5%BC%8F"><span class="toc-number">5.3.2.</span> <span class="toc-text">关系规范化范式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%80%86%E8%A7%84%E8%8C%83%E5%8C%96%E5%A4%84%E7%90%86"><span class="toc-number">5.3.3.</span> <span class="toc-text">逆规范化处理</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E5%BA%93%E7%AE%A1%E7%90%86"><span class="toc-number">6.</span> <span class="toc-text">数据库管理</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%A6%82%E8%BF%B0-2"><span class="toc-number">6.1.</span> <span class="toc-text">概述</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%8B%E5%8A%A1%E7%AE%A1%E7%90%86"><span class="toc-number">6.2.</span> <span class="toc-text">事务管理</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%B9%B6%E5%8F%91%E6%8E%A7%E5%88%B6"><span class="toc-number">6.3.</span> <span class="toc-text">并发控制</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%8B%E5%8A%A1%E8%B0%83%E5%BA%A6"><span class="toc-number">6.3.1.</span> <span class="toc-text">事务调度</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E4%B8%8D%E4%B8%80%E8%87%B4%E9%97%AE%E9%A2%98"><span class="toc-number">6.3.1.1.</span> <span class="toc-text">数据不一致问题</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%94%81%E6%9C%BA%E5%88%B6"><span class="toc-number">6.3.2.</span> <span class="toc-text">锁机制</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8A%A0%E9%94%81%E5%8D%8F%E8%AE%AE"><span class="toc-number">6.3.2.1.</span> <span class="toc-text">加锁协议</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%A4%E9%98%B6%E6%AE%B5%E9%94%81%E5%AE%9A%E5%8D%8F%E8%AE%AE"><span class="toc-number">6.3.2.2.</span> <span class="toc-text">两阶段锁定协议</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%AD%BB%E9%94%81"><span class="toc-number">6.3.3.</span> <span class="toc-text">死锁</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%8B%E5%8A%A1%E9%9A%94%E7%A6%BB"><span class="toc-number">6.3.4.</span> <span class="toc-text">事务隔离</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%89%E5%85%A8%E7%AE%A1%E7%90%86"><span class="toc-number">6.4.</span> <span class="toc-text">安全管理</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AD%98%E5%8F%96%E5%AE%89%E5%85%A8%E6%A8%A1%E5%9E%8B"><span class="toc-number">6.4.1.</span> <span class="toc-text">存取安全模型</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%B3%BB%E7%BB%9F%E5%AE%89%E5%85%A8%E6%A8%A1%E5%9E%8B"><span class="toc-number">6.4.2.</span> <span class="toc-text">系统安全模型</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%94%A8%E6%88%B7%E7%AE%A1%E7%90%86"><span class="toc-number">6.4.3.</span> <span class="toc-text">用户管理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86"><span class="toc-number">6.4.4.</span> <span class="toc-text">权限管理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%A7%92%E8%89%B2%E7%AE%A1%E7%90%86"><span class="toc-number">6.4.5.</span> <span class="toc-text">角色管理</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%87%E4%BB%BD%E4%B8%8E%E6%81%A2%E5%A4%8D"><span class="toc-number">6.5.</span> <span class="toc-text">数据库备份与恢复</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E5%BA%93%E5%BA%94%E7%94%A8%E7%BC%96%E7%A8%8B"><span class="toc-number">7.</span> <span class="toc-text">数据库应用编程</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9E%E6%8E%A5%E6%8A%80%E6%9C%AFodbc"><span class="toc-number">7.1.</span> <span class="toc-text">数据库连接技术ODBC</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A6%82%E5%BF%B5"><span class="toc-number">7.1.1.</span> <span class="toc-text">概念</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#odbc%E5%B1%82%E6%AC%A1%E7%BB%93%E6%9E%84"><span class="toc-number">7.1.2.</span> <span class="toc-text">ODBC层次结构</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#odbc%E4%BD%BF%E7%94%A8%E6%AD%A5%E9%AA%A4"><span class="toc-number">7.1.3.</span> <span class="toc-text">ODBC使用步骤</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9E%E6%8E%A5%E6%8A%80%E6%9C%AFjdbc"><span class="toc-number">7.2.</span> <span class="toc-text">数据库连接技术（JDBC）</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A6%82%E5%BF%B5-2"><span class="toc-number">7.2.1.</span> <span class="toc-text">概念</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E5%BA%93%E5%AD%98%E5%82%A8%E8%BF%87%E7%A8%8B"><span class="toc-number">7.3.</span> <span class="toc-text">数据库存储过程</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E5%BA%93%E8%A7%A6%E5%8F%91%E5%99%A8"><span class="toc-number">7.4.</span> <span class="toc-text">数据库触发器</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%A7%A6%E5%8F%91%E5%99%A8%E7%9B%B8%E5%85%B3%E7%89%B9%E6%AE%8A%E5%8F%98%E9%87%8F"><span class="toc-number">7.4.1.</span> <span class="toc-text">触发器相关特殊变量</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E5%BA%93%E6%B8%B8%E6%A0%87"><span class="toc-number">7.5.</span> <span class="toc-text">数据库游标</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%B5%8C%E5%85%A5%E5%BC%8Fsql%E7%BC%96%E7%A8%8B"><span class="toc-number">7.6.</span> <span class="toc-text">嵌入式sql编程</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#nosql%E6%95%B0%E6%8D%AE%E5%BA%93%E6%8A%80%E6%9C%AF"><span class="toc-number">8.</span> <span class="toc-text">NoSQL数据库技术</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%A4%A7%E6%95%B0%E6%8D%AE5v%E7%89%B9%E5%BE%81%E5%A4%A7%E9%87%8F%E9%AB%98%E9%80%9F%E6%80%A7%E5%A4%9A%E6%A0%B7%E6%80%A7%E7%9C%9F%E5%AE%9E%E6%80%A7%E4%BB%B7%E5%80%BC%E6%80%A7"><span class="toc-number">8.1.</span> <span class="toc-text">大数据5V特征：大量，高速性，多样性，真实性，价值性</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#cap%E7%90%86%E8%AE%BA"><span class="toc-number">8.2.</span> <span class="toc-text">CAP理论</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#base"><span class="toc-number">8.3.</span> <span class="toc-text">BASE</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9C%80%E7%BB%88%E4%B8%80%E8%87%B4%E6%80%A7"><span class="toc-number">8.4.</span> <span class="toc-text">最终一致性</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AD%98%E5%82%A8%E6%A8%A1%E5%9E%8B"><span class="toc-number">8.5.</span> <span class="toc-text">存储模型</span></a></li></ol></li></ol></section><section class="sidebar-ov hide"><div class="sidebar-ov-author"><div class="sidebar-ov-author__avatar"><img class="sidebar-ov-author__avatar_img" src="/assets/android-chrome-512x512.webp" alt="avatar"></div><p class="sidebar-ov-author__text">Self-discipline is key in life.</p></div><div class="sidebar-ov-social"><a class="sidebar-ov-social-item" href="https://github.com/DavidingPlus" target="_blank" rel="noopener" data-popover="GitHub" data-popover-pos="up"><span class="sidebar-ov-social-item__icon"><i class="fab fa-github"></i></span></a><a class="sidebar-ov-social-item" href="/qq/" target="_blank" rel="noopener" data-popover="QQ" data-popover-pos="up"><span class="sidebar-ov-social-item__icon"><i class="fab fa-qq"></i></span></a><a class="sidebar-ov-social-item" href="/wechat/" target="_blank" rel="noopener" data-popover="微信" data-popover-pos="up"><span class="sidebar-ov-social-item__icon"><i class="fab fa-weixin"></i></span></a><a class="sidebar-ov-social-item" href="mailto:davidingplus@qq.com" target="_blank" rel="noopener" data-popover="davidingplus@qq.com" data-popover-pos="up"><span class="sidebar-ov-social-item__icon"><i class="fas fa-envelope"></i></span></a></div><div class="sidebar-ov-state"><a class="sidebar-ov-state-item sidebar-ov-state-item--posts" href="/archives/"><div class="sidebar-ov-state-item__count">38</div><div class="sidebar-ov-state-item__name">归档</div></a><a class="sidebar-ov-state-item sidebar-ov-state-item--categories" href="/categories/"><div class="sidebar-ov-state-item__count">21</div><div class="sidebar-ov-state-item__name">分类</div></a></div><div class="sidebar-ov-cc"><a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.en" target="_blank" rel="noopener" data-popover="知识共享许可协议" data-popover-pos="up"><img src="/images/cc-by-nc-sa.svg"></a></div></section><div class="sidebar-reading"><div class="sidebar-reading-info"><span class="sidebar-reading-info__text">您已阅读了 </span><span class="sidebar-reading-info__num">0</span><span class="sidebar-reading-info__perc">%</span></div><div class="sidebar-reading-line"></div></div></aside></div><div class="clearfix"></div></div></main><footer class="footer" id="footer"><div class="footer-inner"><div><span>Copyright © 2023~2025</span><span class="footer__icon"><i class="fas fa-heart"></i></span><span>DavidingPlus</span><span class="footer__devider">|</span><span>蜀 ICP 备 2024088070 号</span></div><div><span>由 <a href="http://hexo.io/" title="Hexo" target="_blank" rel="noopener">Hexo</a> 强力驱动</span><span> v7.2.0</span><span class="footer__devider">|</span><span>主题 - <a href="https://github.com/liuyib/hexo-theme-stun/" title="Stun" target="_blank" rel="noopener">Stun</a></span><span> v2.8.6</span></div><div class="busuanzi"><span class="busuanzi-siteuv"><span class="busuanzi-siteuv__icon"><i class="fas fa-user"></i></span><span class="busuanzi-siteuv__info">访问人数</span><span class="busuanzi-siteuv__value" id="busuanzi_value_site_uv"></span></span><span class="busuanzi-sitepv"><span class="busuanzi-siteuv__icon"><i class="fas fa-eye"></i></span><span class="busuanzi-siteuv__info">浏览总量</span><span class="busuanzi-siteuv__value" id="busuanzi_value_site_pv"></span></span></div><div><span id="timeDate">载入天数...</span><span id="times">载入时分秒...</span><script>var now=new Date;function createtime(){var n=new Date("09/18/2023 00:00:00");now.setTime(now.getTime()+250),days=(now-n)/1e3/60/60/24,dnum=Math.floor(days),hours=(now-n)/1e3/60/60-24*dnum,hnum=Math.floor(hours),1==String(hnum).length&&(hnum="0"+hnum),minutes=(now-n)/1e3/60-1440*dnum-60*hnum,mnum=Math.floor(minutes),1==String(mnum).length&&(mnum="0"+mnum),seconds=(now-n)/1e3-86400*dnum-3600*hnum-60*mnum,snum=Math.round(seconds),1==String(snum).length&&(snum="0"+snum),document.getElementById("timeDate").innerHTML="小破站已经安全运行 "+dnum+" 天 ",document.getElementById("times").innerHTML=hnum+" 小时 "+mnum+" 分 "+snum+" 秒啦！"}setInterval("createtime()",250)</script></div><script type="text/javascript" id="maid-script" mermaidoptioins="{&quot;theme&quot;:&quot;default&quot;}" src="//cdn.davidingplus.cn/files/hexo-theme-stun-third-party/js/mermaid.min.js"></script><script>if(window.mermaid){var options=JSON.parse(document.getElementById("maid-script").getAttribute("mermaidoptioins"));mermaid.initialize(options)}</script></div></footer><div class="loading-animation" id="loading-animation"><div class="loading-animation__progress"></div></div><div class="back2top" id="back2top"><span class="back2top__icon"><i class="fas fa-thumbs-up"></i></span></div><div class="back2bottom" id="back2bottom"><span class="back2bottom__icon"><i class="fas fa-rocket"></i></span></div></div><div class="search-mask"></div><div class="search-popup"><span class="search-close"></span><div class="search-input"><input placeholder="搜索文章（支持多关键词，请用空格分隔）"><div class="search-btns">使用搜索：<span class="search-btns-item search-btns-item--bing"><i></i>必应</span><span class="search-btns-item search-btns-item--baidu"><i></i>百度</span></div></div><div class="search-results"></div></div><script src="//cdn.davidingplus.cn/files/hexo-theme-stun-third-party/js/jquery.js"></script><script src="//cdn.davidingplus.cn/files/hexo-theme-stun-third-party/js/velocity.js"></script><script src="//cdn.davidingplus.cn/files/hexo-theme-stun-third-party/js/velocity-ui.js"></script><script src="//cdn.davidingplus.cn/files/hexo-theme-stun-third-party/js/canvas-nest.js" color="255,255,255" opacity="1" count="99" zindex="-1"></script><script src="//cdn.davidingplus.cn/files/hexo-theme-stun-third-party/js/fancybox.js"></script><script src="//cdn.davidingplus.cn/files/hexo-theme-stun-third-party/js/masonry.js"></script><script src="//cdn.davidingplus.cn/files/hexo-theme-stun-third-party/js/lazyload.js"></script><script>function initSearch(){var e=!0,t="search.json";t?/json$/i.test(t)&&(e=!1):t="search.xml";var n="/"+t;$.ajax({url:n,dataType:e?"xml":"json",async:!0,success:function(t){var n=e?$("entry",t).map(function(){return{title:$("title",this).text(),content:$("content",this).text(),url:$("url",this).text()}}).get():t,o=$(".search-input input"),i=$(".search-results"),c=100,r=1,a=function(){var e=o.val().toLowerCase().trim(),t=e.split(/[\s]+/),a=[];t.length>1&&t.push(e),e.length>0&&n.forEach(function(e){var n=!1,o=e.title&&e.title.trim()||"[ 文章无标题 ]",i=o&&o.toLowerCase(),s=e.content&&e.content.replace(/<[^>]+>/g,""),l=s&&s.toLowerCase(),u=e.url&&decodeURI(e.url).replace(/\/{2,}/g,"/"),h=[],d=[];t.forEach(function(e){function t(e,t,n,o){if(!e||!t)return[];var i=0,c=-1,r=[];for(n||(e=e.toLowerCase(),t=t.toLowerCase());-1!==(c=t.indexOf(e,i));){var a=!1;h.forEach(function(t){t.index===c&&t.word.length<e.length&&(t.word=e,a=!0)}),i=c+e.length,!a&&r.push({index:c,word:e,weight:o})}return r}h=h.concat(t(e,i,!1,c)),d=d.concat(t(e,l,!1,r))});var f=h.length,p=d.length;if((f>0||p>0)&&(n=!0),n){function w(e,t,n,o){if(e&&t&&t.length){var i="",c=n,r=o;return t.forEach(function(t){if(!(t.index<c)){var n=t.index+t.word.length;i+=e.slice(c,t.index),i+="<b>"+e.slice(t.index,n)+"</b>",c=n}}),i+=e.slice(c,r)}}[h,d].forEach(function(e){e.sort(function(e,t){return e.index-t.index})});var v,g={},x=h.length*c+d.length*r,y=w(o,h,0,o.length)||o;if(d.length>0){var S=d[0].index;v=w(s,d,S>20?S-20:0,S+180)}else v=s.slice(0,200);g.title=y,g.content=v,g.url=u,g.weight=x,a.push(g)}});var s="";a.length?(a.sort(function(e,t){return t.weight-e.weight}),s+="<ul>",a.forEach(function(e){s+='<li><a class="search-results-title" href="'+e.url+'">',s+=e.title,s+='</a><div class="search-results-content">',s+=e.content,s+="</div></li>"}),s+="</ul>"):s+='<div class="search-results-none"><i class="far fa-meh"></i></div>',i.html(s)};o.on("input",a),o.on("keyup",function(e){e.keyCode===Stun.utils.codeToKeyCode("Enter")&&a()})}})}function closeSearch(){$("body").css({overflow:"auto"}),$(".search-popup").css({display:"none"}),$(".search-mask").css({display:"none"})}function safeOpenUrl(e){var t=window.open();t.opener=null,t.location=e}function extSearch(e){var t=window.location.host,n=$(".search-input input").val().toLowerCase().trim();n?safeOpenUrl({google:"https://www.google.com/search?q=",bing:"https://cn.bing.com/search?q=",baidu:"https://www.baidu.com/s?ie=UTF-8&wd="}[e]+n+" site:"+t):Stun.utils.popAlert("warning","请输入字符")}window.addEventListener("DOMContentLoaded",function(){Stun.utils.pjaxReloadLocalSearch=function(){$(".header-nav-search").on("click",function(e){e.stopPropagation(),$("body").css("overflow","hidden"),$(".search-popup").velocity("stop").velocity("transition.expandIn",{duration:300,complete:function(){$(".search-popup input").focus()}}),$(".search-mask").velocity("stop").velocity("transition.fadeIn",{duration:300}),initSearch()}),$(".search-mask, .search-close").on("click",function(){closeSearch()}),$(document).on("keydown",function(e){e.keyCode===Stun.utils.codeToKeyCode("Escape")&&closeSearch()})},Stun.utils.pjaxReloadLocalSearch()},!1);var assistSearchList=window.CONFIG.assistSearch;Array.isArray(assistSearchList)&&assistSearchList.forEach(function(e){document.querySelector(".search-btns-item--"+e).addEventListener("click",function(){extSearch(e)},!1)})</script><script src="//cdn.davidingplus.cn/files/hexo-theme-stun-third-party/js/pjax.js"></script><script>window.addEventListener("DOMContentLoaded",function(){new Pjax({selectors:["head title","#main",".pjax-reload",".header-banner"],history:!0,scrollTo:!1,scrollRestoration:!1,cacheBust:!1,debug:!1,currentUrlFullReload:!1,timeout:0});document.addEventListener("pjax:send",function(){$(".header-nav-menu").removeClass("show"),CONFIG.pjax&&CONFIG.pjax.avoidBanner&&$("html").velocity("scroll",{duration:500,offset:$("#header").height(),easing:"easeInOutCubic"}),$(".loading-animation").addClass("loading")},!1),window.addEventListener("pjax:complete",function(){if($(".loading-animation").removeClass("loading"),$("link[rel=prefetch], script[data-pjax-rm]").each(function(){$(this).remove()}),$("script[data-pjax], #pjax-reload script").each(function(){$(this).parent().append($(this).remove())}),Stun.utils.pjaxReloadBoot&&Stun.utils.pjaxReloadBoot(),Stun.utils.pjaxReloadScroll&&Stun.utils.pjaxReloadScroll(),Stun.utils.pjaxReloadSidebar&&Stun.utils.pjaxReloadSidebar(),"undefined"!=typeof mermaid){const e=Array.from(document.querySelectorAll(".mermaid")).filter(e=>!e.dataset.processed);mermaid.init(void 0,e)}},!1)},!1)</script><div id="pjax-reload"><link href="//cdn.davidingplus.cn/files/hexo-theme-stun-third-party/css/katex.min.css" rel="stylesheet" type="text/css"><link href="//cdn.davidingplus.cn/files/hexo-theme-stun-third-party/css/copy-tex.css" rel="stylesheet" type="text/css"><script src="//cdn.davidingplus.cn/files/hexo-theme-stun-third-party/js/copy-tex.min.js"></script><script src="//cdn.davidingplus.cn/files/hexo-theme-stun-third-party/js/quicklink.js"></script><script>function initQuicklink(){quicklink({timeout:"10000",priority:!0,ignores:[i=>i.includes("#"),i=>"https://blog.davidingplus.cn/posts/27483ebb.html"===i,/\/api\/?/,i=>i.includes(".xml"),i=>i.includes(".zip"),(i,t)=>t.hasAttribute("nofollow"),(i,t)=>t.hasAttribute("noprefetch")]})}initQuicklink()</script><script src="//cdn.davidingplus.cn/files/hexo-theme-stun-third-party/js/busuanzi.js" async></script></div><script src="/js/utils.js?v=2.8.6"></script><script src="/js/stun-boot.js?v=2.8.6"></script><script src="/js/scroll.js?v=2.8.6"></script><script src="/js/header.js?v=2.8.6"></script><script src="/js/sidebar.js?v=2.8.6"></script><script type="application/json" src="/search.json"></script><script data-pjax="">function loadUtterances(){var t=document,e=t.createElement("script"),s=t.getElementById("utterances-container"),r=Stun.utils.getNightMode()?"photon-dark":"github-light";s&&(e.src="https://utteranc.es/client.js",e.setAttribute("repo","DavidingPlus/blog-comments"),e.setAttribute("issue-term","title"),e.setAttribute("label","utterances"),e.setAttribute("theme",r),e.setAttribute("crossorigin","anonymous"),e.setAttribute("async",""),e.setAttribute("data-pjax-rm",""),s.append(e))}loadUtterances()</script><script async src="/js/cursor/text.js"></script><script src="/js/activate-power-mode.js"></script><script>POWERMODE.colorful=!0,POWERMODE.shake=!0,document.body.addEventListener("input",POWERMODE)</script><script>var titleTime,OriginTitile=document.title;document.addEventListener("visibilitychange",function(){document.hidden?(document.title="🤡快回来,粗大事了~~"+OriginTitile,clearTimeout(titleTime)):(document.title="😚欢迎回来!~"+OriginTitile,titleTime=setTimeout(function(){document.title=OriginTitile},2e3))})</script><script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({pluginRootPath:"live2dw/",pluginJsPath:"lib/",pluginModelPath:"assets/",tagMode:!1,debug:!1,model:{jsonPath:"/live2dw/assets/wanko.model.json"},display:{position:"left",width:160,height:290},mobile:{show:!0},log:!1})</script></body></html>